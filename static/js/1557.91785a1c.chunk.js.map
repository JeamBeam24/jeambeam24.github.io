{"version":3,"file":"static/js/1557.91785a1c.chunk.js","mappings":"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","sources":["../../../node_modules/react-feather/dist/icons/plus.js","graphql/thegraph/apollo.ts","utils/computeSurroundingTicks.ts","hooks/usePoolTickData.ts","hooks/usePools.ts","pages/NotFound/index.tsx","components/Charts/LiquidityChart/renderer.tsx","components/Charts/LiquidityChart/liquidity-bar-series.tsx","components/Charts/LiquidityChart/index.tsx","components/Pools/PoolDetails/ChartSection/index.tsx","components/Pools/PoolDetails/ChartSection/hooks.ts","components/Pools/PoolDetails/shared.ts","components/Pools/PoolDetails/PoolDetailsHeader.tsx","components/Pools/PoolDetails/PoolDetailsLink.tsx","components/Pools/PoolDetails/PoolDetailsStats.tsx","components/Pools/PoolDetails/PoolDetailsStatsButtons.tsx","components/Pools/PoolDetails/icons.tsx","components/Pools/PoolDetails/PoolDetailsPositionsTable.tsx","graphql/data/pools/usePoolTransactions.ts","components/Pools/PoolDetails/PoolDetailsTransactionsTable.tsx","components/Pools/PoolDetails/PoolDetailsTable.tsx","graphql/data/pools/usePoolData.ts","pages/PoolDetails/utils.ts","pages/PoolDetails/index.tsx"],"sourcesContent":["function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=_objectWithoutPropertiesLoose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}import React,{forwardRef}from\"react\";import PropTypes from\"prop-types\";var Plus=forwardRef((function(_ref,ref){var _ref$color=_ref.color,color=void 0===_ref$color?\"currentColor\":_ref$color,_ref$size=_ref.size,size=void 0===_ref$size?24:_ref$size,rest=_objectWithoutProperties(_ref,[\"color\",\"size\"]);return React.createElement(\"svg\",_extends({ref:ref,xmlns:\"http://www.w3.org/2000/svg\",width:size,height:size,viewBox:\"0 0 24 24\",fill:\"none\",stroke:color,strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"},rest),React.createElement(\"line\",{x1:\"12\",y1:\"5\",x2:\"12\",y2:\"19\"}),React.createElement(\"line\",{x1:\"5\",y1:\"12\",x2:\"19\",y2:\"12\"}))}));Plus.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number])},Plus.displayName=\"Plus\";export default Plus;","import { ApolloClient, ApolloLink, concat, HttpLink, InMemoryCache, NormalizedCacheObject } from '@apollo/client'\r\nimport { ChainId } from '@uniswap/sdk-core'\r\nimport { CHAIN_SUBGRAPH_URL, isSupportedChainId } from 'constants/chains'\r\n\r\nimport store from '../../state/index'\r\n\r\nconst httpLink = new HttpLink({ uri: CHAIN_SUBGRAPH_URL[ChainId.MAINNET] })\r\n\r\n// This middleware will allow us to dynamically update the uri for the requests based off chainId\r\n// For more information: https://www.apollographql.com/docs/react/networking/advanced-http-networking/\r\nconst authMiddleware = new ApolloLink((operation, forward) => {\r\n  // add the authorization to the headers\r\n  const chainId = store.getState().application.chainId\r\n\r\n  operation.setContext(() => ({\r\n    uri:\r\n      isSupportedChainId(chainId) && CHAIN_SUBGRAPH_URL[chainId]\r\n        ? CHAIN_SUBGRAPH_URL[chainId]\r\n        : CHAIN_SUBGRAPH_URL[ChainId.MAINNET],\r\n  }))\r\n\r\n  return forward(operation)\r\n})\r\n\r\nexport const apolloClient = new ApolloClient({\r\n  cache: new InMemoryCache(),\r\n  link: concat(authMiddleware, httpLink),\r\n})\r\n\r\nexport const chainToApolloClient: Record<number, ApolloClient<NormalizedCacheObject>> = Object.fromEntries(\r\n  Object.entries(CHAIN_SUBGRAPH_URL).map(([chainId, url]) => [\r\n    chainId,\r\n    new ApolloClient({\r\n      cache: new InMemoryCache(),\r\n      uri: url,\r\n    }),\r\n  ])\r\n)\r\n","import { Token } from '@uniswap/sdk-core'\r\nimport { tickToPrice } from '@uniswap/v3-sdk'\r\nimport { TickProcessed } from 'hooks/usePoolTickData'\r\nimport JSBI from 'jsbi'\r\n\r\nimport { Ticks } from '../graphql/thegraph/AllV3TicksQuery'\r\n\r\nconst PRICE_FIXED_DIGITS = 8\r\n\r\n// Computes the numSurroundingTicks above or below the active tick.\r\nexport default function computeSurroundingTicks(\r\n  token0: Token,\r\n  token1: Token,\r\n  activeTickProcessed: TickProcessed,\r\n  sortedTickData: Ticks,\r\n  pivot: number,\r\n  ascending: boolean\r\n): TickProcessed[] {\r\n  let previousTickProcessed: TickProcessed = {\r\n    ...activeTickProcessed,\r\n  }\r\n  // Iterate outwards (either up or down depending on direction) from the active tick,\r\n  // building active liquidity for every tick.\r\n  let processedTicks: TickProcessed[] = []\r\n  for (let i = pivot + (ascending ? 1 : -1); ascending ? i < sortedTickData.length : i >= 0; ascending ? i++ : i--) {\r\n    const tick = Number(sortedTickData[i].tick)\r\n    const sdkPrice = tickToPrice(token0, token1, tick)\r\n    const currentTickProcessed: TickProcessed = {\r\n      liquidityActive: previousTickProcessed.liquidityActive,\r\n      tick,\r\n      liquidityNet: JSBI.BigInt(sortedTickData[i].liquidityNet),\r\n      price0: sdkPrice.toFixed(PRICE_FIXED_DIGITS),\r\n      sdkPrice,\r\n    }\r\n\r\n    // Update the active liquidity.\r\n    // If we are iterating ascending and we found an initialized tick we immediately apply\r\n    // it to the current processed tick we are building.\r\n    // If we are iterating descending, we don't want to apply the net liquidity until the following tick.\r\n    if (ascending) {\r\n      currentTickProcessed.liquidityActive = JSBI.add(\r\n        previousTickProcessed.liquidityActive,\r\n        JSBI.BigInt(sortedTickData[i].liquidityNet)\r\n      )\r\n    } else if (!ascending && JSBI.notEqual(previousTickProcessed.liquidityNet, JSBI.BigInt(0))) {\r\n      // We are iterating descending, so look at the previous tick and apply any net liquidity.\r\n      currentTickProcessed.liquidityActive = JSBI.subtract(\r\n        previousTickProcessed.liquidityActive,\r\n        previousTickProcessed.liquidityNet\r\n      )\r\n    }\r\n\r\n    processedTicks.push(currentTickProcessed)\r\n    previousTickProcessed = currentTickProcessed\r\n  }\r\n\r\n  if (!ascending) {\r\n    processedTicks = processedTicks.reverse()\r\n  }\r\n\r\n  return processedTicks\r\n}\r\n","import { ChainId, Currency, Price, Token, V3_CORE_FACTORY_ADDRESSES } from '@uniswap/sdk-core'\r\nimport { FeeAmount, Pool, TICK_SPACINGS, tickToPrice } from '@uniswap/v3-sdk'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { TickData, Ticks } from 'graphql/thegraph/AllV3TicksQuery'\r\nimport { useAllV3TicksQuery } from 'graphql/thegraph/__generated__/types-and-hooks'\r\nimport JSBI from 'jsbi'\r\nimport ms from 'ms'\r\nimport { useEffect, useMemo, useState } from 'react'\r\nimport computeSurroundingTicks from 'utils/computeSurroundingTicks'\r\n\r\nimport { chainToApolloClient } from 'graphql/thegraph/apollo'\r\nimport { PoolState, usePoolMultichain } from './usePools'\r\n\r\nconst PRICE_FIXED_DIGITS = 8\r\n\r\n// Tick with fields parsed to JSBIs, and active liquidity computed.\r\nexport interface TickProcessed {\r\n  tick: number\r\n  liquidityActive: JSBI\r\n  liquidityNet: JSBI\r\n  price0: string\r\n  sdkPrice: Price<Token, Token>\r\n}\r\n\r\nconst getActiveTick = (tickCurrent: number | undefined, feeAmount: FeeAmount | undefined) =>\r\n  tickCurrent && feeAmount ? Math.floor(tickCurrent / TICK_SPACINGS[feeAmount]) * TICK_SPACINGS[feeAmount] : undefined\r\n\r\nfunction useTicksFromSubgraph(\r\n  currencyA: Currency | undefined,\r\n  currencyB: Currency | undefined,\r\n  feeAmount: FeeAmount | undefined,\r\n  skip = 0,\r\n  chainId: ChainId\r\n) {\r\n  const apolloClient = chainToApolloClient[chainId]\r\n  const poolAddress =\r\n    currencyA && currencyB && feeAmount\r\n      ? Pool.getAddress(\r\n          currencyA?.wrapped,\r\n          currencyB?.wrapped,\r\n          feeAmount,\r\n          undefined,\r\n          chainId ? V3_CORE_FACTORY_ADDRESSES[chainId] : undefined\r\n        )\r\n      : undefined\r\n\r\n  return useAllV3TicksQuery({\r\n    variables: { poolAddress: poolAddress?.toLowerCase(), skip },\r\n    skip: !poolAddress,\r\n    pollInterval: ms(`30s`),\r\n    client: apolloClient,\r\n  })\r\n}\r\n\r\nconst MAX_THE_GRAPH_TICK_FETCH_VALUE = 1000\r\n// Fetches all ticks for a given pool\r\nfunction useAllV3Ticks(\r\n  currencyA: Currency | undefined,\r\n  currencyB: Currency | undefined,\r\n  feeAmount: FeeAmount | undefined,\r\n  chainId: ChainId\r\n): {\r\n  isLoading: boolean\r\n  error: unknown\r\n  ticks?: TickData[]\r\n} {\r\n  const [skipNumber, setSkipNumber] = useState(0)\r\n  const [subgraphTickData, setSubgraphTickData] = useState<Ticks>([])\r\n  const { data, error, loading: isLoading } = useTicksFromSubgraph(currencyA, currencyB, feeAmount, skipNumber, chainId)\r\n\r\n  useEffect(() => {\r\n    if (data?.ticks.length) {\r\n      setSubgraphTickData((tickData) => [...tickData, ...data.ticks])\r\n      if (data.ticks.length === MAX_THE_GRAPH_TICK_FETCH_VALUE) {\r\n        setSkipNumber((skipNumber) => skipNumber + MAX_THE_GRAPH_TICK_FETCH_VALUE)\r\n      }\r\n    }\r\n  }, [data?.ticks])\r\n\r\n  return {\r\n    isLoading: isLoading || data?.ticks.length === MAX_THE_GRAPH_TICK_FETCH_VALUE,\r\n    error,\r\n    ticks: subgraphTickData,\r\n  }\r\n}\r\n\r\nexport function usePoolActiveLiquidity(\r\n  currencyA: Currency | undefined,\r\n  currencyB: Currency | undefined,\r\n  feeAmount: FeeAmount | undefined,\r\n  chainId?: ChainId\r\n): {\r\n  isLoading: boolean\r\n  error: any\r\n  currentTick?: number\r\n  activeTick?: number\r\n  liquidity?: JSBI\r\n  sqrtPriceX96?: JSBI\r\n  data?: TickProcessed[]\r\n} {\r\n  const defaultChainId = useWeb3React().chainId ?? ChainId.MAINNET\r\n  const pool = usePoolMultichain(currencyA?.wrapped, currencyB?.wrapped, feeAmount, chainId ?? defaultChainId)\r\n  const liquidity = pool[1]?.liquidity\r\n  const sqrtPriceX96 = pool[1]?.sqrtRatioX96\r\n\r\n  const currentTick = pool[1]?.tickCurrent\r\n  // Find nearest valid tick for pool in case tick is not initialized.\r\n  const activeTick = useMemo(() => getActiveTick(currentTick, feeAmount), [currentTick, feeAmount])\r\n\r\n  const { isLoading, error, ticks } = useAllV3Ticks(currencyA, currencyB, feeAmount, chainId ?? defaultChainId)\r\n\r\n  return useMemo(() => {\r\n    if (\r\n      !currencyA ||\r\n      !currencyB ||\r\n      activeTick === undefined ||\r\n      pool[0] !== PoolState.EXISTS ||\r\n      !ticks ||\r\n      ticks.length === 0 ||\r\n      isLoading\r\n    ) {\r\n      return {\r\n        isLoading: isLoading || pool[0] === PoolState.LOADING,\r\n        error,\r\n        activeTick,\r\n        data: undefined,\r\n      }\r\n    }\r\n\r\n    const token0 = currencyA?.wrapped\r\n    const token1 = currencyB?.wrapped\r\n\r\n    // find where the active tick would be to partition the array\r\n    // if the active tick is initialized, the pivot will be an element\r\n    // if not, take the previous tick as pivot\r\n    const pivot = ticks.findIndex(({ tick }) => tick > activeTick) - 1\r\n\r\n    if (pivot < 0) {\r\n      // consider setting a local error\r\n      console.error('TickData pivot not found')\r\n      return {\r\n        isLoading,\r\n        error,\r\n        activeTick,\r\n        data: undefined,\r\n      }\r\n    }\r\n\r\n    const sdkPrice = tickToPrice(token0, token1, activeTick)\r\n    const activeTickProcessed: TickProcessed = {\r\n      liquidityActive: JSBI.BigInt(pool[1]?.liquidity ?? 0),\r\n      tick: activeTick,\r\n      liquidityNet: Number(ticks[pivot].tick) === activeTick ? JSBI.BigInt(ticks[pivot].liquidityNet) : JSBI.BigInt(0),\r\n      price0: sdkPrice.toFixed(PRICE_FIXED_DIGITS),\r\n      sdkPrice,\r\n    }\r\n\r\n    const subsequentTicks = computeSurroundingTicks(token0, token1, activeTickProcessed, ticks, pivot, true)\r\n\r\n    const previousTicks = computeSurroundingTicks(token0, token1, activeTickProcessed, ticks, pivot, false)\r\n\r\n    const ticksProcessed = previousTicks.concat(activeTickProcessed).concat(subsequentTicks)\r\n\r\n    return {\r\n      isLoading,\r\n      error,\r\n      currentTick,\r\n      activeTick,\r\n      liquidity,\r\n      sqrtPriceX96,\r\n      data: ticksProcessed,\r\n    }\r\n  }, [currencyA, currencyB, activeTick, pool, ticks, isLoading, error, currentTick, liquidity, sqrtPriceX96])\r\n}\r\n","import { Interface } from '@ethersproject/abi'\r\nimport { BigintIsh, ChainId, Currency, Token, V3_CORE_FACTORY_ADDRESSES } from '@uniswap/sdk-core'\r\nimport IUniswapV3PoolStateJSON from '@uniswap/v3-core/artifacts/contracts/interfaces/pool/IUniswapV3PoolState.sol/IUniswapV3PoolState.json'\r\nimport { FeeAmount, Pool, computePoolAddress } from '@uniswap/v3-sdk'\r\nimport { useContractMultichain } from 'components/AccountDrawer/MiniPortfolio/Pools/hooks'\r\nimport JSBI from 'jsbi'\r\nimport { useMultipleContractSingleData } from 'lib/hooks/multicall'\r\nimport { useEffect, useMemo, useRef } from 'react'\r\nimport { IUniswapV3PoolStateInterface } from 'uniswap/src/abis/types/v3/IUniswapV3PoolState'\r\nimport { UniswapV3Pool } from 'uniswap/src/abis/types/v3/UniswapV3Pool'\r\nimport { useChainId } from 'wagmi'\r\n\r\nconst POOL_STATE_INTERFACE = new Interface(IUniswapV3PoolStateJSON.abi) as IUniswapV3PoolStateInterface\r\n\r\n// Classes are expensive to instantiate, so this caches the recently instantiated pools.\r\n// This avoids re-instantiating pools as the other pools in the same request are loaded.\r\nclass PoolCache {\r\n  // Evict after 128 entries. Empirically, a swap uses 64 entries.\r\n  private static MAX_ENTRIES = 128\r\n\r\n  // These are FIFOs, using unshift/pop. This makes recent entries faster to find.\r\n  private static pools: Pool[] = []\r\n  private static addresses: { key: string; address: string }[] = []\r\n\r\n  static getPoolAddress(factoryAddress: string, tokenA: Token, tokenB: Token, fee: FeeAmount): string {\r\n    if (this.addresses.length > this.MAX_ENTRIES) {\r\n      this.addresses = this.addresses.slice(0, this.MAX_ENTRIES / 2)\r\n    }\r\n\r\n    const { address: addressA } = tokenA\r\n    const { address: addressB } = tokenB\r\n    const key = `${factoryAddress}:${addressA}:${addressB}:${fee.toString()}`\r\n    const found = this.addresses.find((address) => address.key === key)\r\n    if (found) return found.address\r\n\r\n    const address = {\r\n      key,\r\n      address: computePoolAddress({\r\n        factoryAddress,\r\n        tokenA,\r\n        tokenB,\r\n        fee,\r\n      }),\r\n    }\r\n    this.addresses.unshift(address)\r\n    return address.address\r\n  }\r\n\r\n  static getPool(\r\n    tokenA: Token,\r\n    tokenB: Token,\r\n    fee: FeeAmount,\r\n    sqrtPriceX96: BigintIsh,\r\n    liquidity: BigintIsh,\r\n    tick: number\r\n  ): Pool {\r\n    if (this.pools.length > this.MAX_ENTRIES) {\r\n      this.pools = this.pools.slice(0, this.MAX_ENTRIES / 2)\r\n    }\r\n\r\n    const found = this.pools.find(\r\n      (pool) =>\r\n        pool.token0 === tokenA &&\r\n        pool.token1 === tokenB &&\r\n        pool.fee === fee &&\r\n        JSBI.EQ(pool.sqrtRatioX96, sqrtPriceX96) &&\r\n        JSBI.EQ(pool.liquidity, liquidity) &&\r\n        pool.tickCurrent === tick\r\n    )\r\n    if (found) return found\r\n\r\n    const pool = new Pool(tokenA, tokenB, fee, sqrtPriceX96, liquidity, tick)\r\n    this.pools.unshift(pool)\r\n    return pool\r\n  }\r\n}\r\n\r\nexport enum PoolState {\r\n  LOADING,\r\n  NOT_EXISTS,\r\n  EXISTS,\r\n  INVALID,\r\n}\r\n\r\nexport function usePools(\r\n  poolKeys: [Currency | undefined, Currency | undefined, FeeAmount | undefined][]\r\n): [PoolState, Pool | null][] {\r\n  const chainId = useChainId()\r\n\r\n  const poolTokens: ([Token, Token, FeeAmount] | undefined)[] = useMemo(() => {\r\n    if (!chainId) return new Array(poolKeys.length)\r\n\r\n    return poolKeys.map(([currencyA, currencyB, feeAmount]) => {\r\n      if (currencyA && currencyB && feeAmount) {\r\n        const tokenA = currencyA.wrapped\r\n        const tokenB = currencyB.wrapped\r\n        if (tokenA.equals(tokenB)) return undefined\r\n\r\n        return tokenA.sortsBefore(tokenB) ? [tokenA, tokenB, feeAmount] : [tokenB, tokenA, feeAmount]\r\n      }\r\n      return undefined\r\n    })\r\n  }, [chainId, poolKeys])\r\n\r\n  const poolAddresses: (string | undefined)[] = useMemo(() => {\r\n    const v3CoreFactoryAddress = chainId && V3_CORE_FACTORY_ADDRESSES[chainId]\r\n    if (!v3CoreFactoryAddress) return new Array(poolTokens.length)\r\n\r\n    return poolTokens.map((value) => value && PoolCache.getPoolAddress(v3CoreFactoryAddress, ...value))\r\n  }, [chainId, poolTokens])\r\n\r\n  const slot0s = useMultipleContractSingleData(poolAddresses, POOL_STATE_INTERFACE, 'slot0')\r\n  const liquidities = useMultipleContractSingleData(poolAddresses, POOL_STATE_INTERFACE, 'liquidity')\r\n\r\n  return useMemo(() => {\r\n    return poolKeys.map((_key, index) => {\r\n      const tokens = poolTokens[index]\r\n      if (!tokens) return [PoolState.INVALID, null]\r\n      const [token0, token1, fee] = tokens\r\n\r\n      if (!slot0s[index]) return [PoolState.INVALID, null]\r\n      const { result: slot0, loading: slot0Loading, valid: slot0Valid } = slot0s[index]\r\n\r\n      if (!liquidities[index]) return [PoolState.INVALID, null]\r\n      const { result: liquidity, loading: liquidityLoading, valid: liquidityValid } = liquidities[index]\r\n\r\n      if (!tokens || !slot0Valid || !liquidityValid) return [PoolState.INVALID, null]\r\n      if (slot0Loading || liquidityLoading) return [PoolState.LOADING, null]\r\n      if (!slot0 || !liquidity) return [PoolState.NOT_EXISTS, null]\r\n      if (!slot0.sqrtPriceX96 || slot0.sqrtPriceX96.eq(0)) return [PoolState.NOT_EXISTS, null]\r\n\r\n      try {\r\n        const pool = PoolCache.getPool(token0, token1, fee, slot0.sqrtPriceX96, liquidity[0], slot0.tick)\r\n        return [PoolState.EXISTS, pool]\r\n      } catch (error) {\r\n        console.error('Error when constructing the pool', error)\r\n        return [PoolState.NOT_EXISTS, null]\r\n      }\r\n    })\r\n  }, [liquidities, poolKeys, slot0s, poolTokens])\r\n}\r\n\r\nexport function usePool(\r\n  currencyA: Currency | undefined,\r\n  currencyB: Currency | undefined,\r\n  feeAmount: FeeAmount | undefined\r\n): [PoolState, Pool | null] {\r\n  const poolKeys: [Currency | undefined, Currency | undefined, FeeAmount | undefined][] = useMemo(\r\n    () => [[currencyA, currencyB, feeAmount]],\r\n    [currencyA, currencyB, feeAmount]\r\n  )\r\n\r\n  return usePools(poolKeys)[0]\r\n}\r\n\r\nexport function usePoolMultichain(\r\n  tokenA: Token | undefined,\r\n  tokenB: Token | undefined,\r\n  fee: number | undefined,\r\n  chainId: ChainId\r\n): [PoolState, Pool | null] {\r\n  const poolData = useRef<[PoolState, Pool | null]>([PoolState.LOADING, null])\r\n  const poolAddress =\r\n    tokenA && tokenB && fee\r\n      ? PoolCache.getPoolAddress(V3_CORE_FACTORY_ADDRESSES[chainId], tokenA, tokenB, fee)\r\n      : undefined\r\n\r\n  const contractMap = useMemo(() => (poolAddress ? { [chainId]: poolAddress } : {}), [chainId, poolAddress])\r\n  const contract = useContractMultichain<UniswapV3Pool>(contractMap, IUniswapV3PoolStateJSON.abi)[chainId]\r\n\r\n  useEffect(() => {\r\n    async function getPool() {\r\n      try {\r\n        if (!tokenA || !tokenB || !fee || !poolAddress || !contract) {\r\n          poolData.current = [PoolState.INVALID, null]\r\n          return\r\n        }\r\n\r\n        const slot0 = await contract.slot0()\r\n        const liquidity = await contract.liquidity()\r\n        poolData.current = [PoolState.NOT_EXISTS, null]\r\n\r\n        const pool = new Pool(tokenA, tokenB, fee, slot0.sqrtPriceX96.toString(), liquidity.toString(), slot0.tick)\r\n        poolData.current = [PoolState.EXISTS, pool]\r\n      } catch (e) {\r\n        poolData.current = [PoolState.INVALID, null]\r\n      }\r\n    }\r\n    getPool()\r\n  }, [contract, fee, poolAddress, tokenA, tokenB])\r\n  return poolData.current\r\n}\r\n","import { InterfacePageName } from '@uniswap/analytics-events'\r\nimport { Trace } from 'analytics'\r\nimport { SmallButtonPrimary } from 'components/Button'\r\nimport { useIsMobile } from 'hooks/screenSize'\r\nimport { Trans } from 'i18n'\r\nimport { Link } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { ThemedText } from 'theme/components'\r\nimport { useIsDarkMode } from 'theme/components/ThemeToggle'\r\n\r\nimport darkImage from '../../assets/images/404-page-dark.png'\r\nimport lightImage from '../../assets/images/404-page-light.png'\r\n\r\nconst Image = styled.img`\r\n  max-width: 510px;\r\n  width: 100%;\r\n  padding: 0 75px;\r\n`\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`\r\n\r\nconst Header = styled(Container)`\r\n  gap: 30px;\r\n`\r\n\r\nconst PageWrapper = styled(Container)`\r\n  flex: 1;\r\n  justify-content: center;\r\n  gap: 50px;\r\n\r\n  @media screen and (min-width: ${({ theme }) => theme.breakpoint.md}px) {\r\n    justify-content: space-between;\r\n    padding-top: 64px;\r\n  }\r\n`\r\n\r\nexport default function NotFound() {\r\n  const isDarkMode = useIsDarkMode()\r\n  const isMobile = useIsMobile()\r\n\r\n  const Title = isMobile ? ThemedText.LargeHeader : ThemedText.Hero\r\n  const Paragraph = isMobile ? ThemedText.HeadlineMedium : ThemedText.HeadlineLarge\r\n\r\n  return (\r\n    <PageWrapper>\r\n      <Trace page={InterfacePageName.NOT_FOUND} shouldLogImpression>\r\n        <Header>\r\n          <Container>\r\n            <Title>404</Title>\r\n            <Paragraph color=\"neutral2\">\r\n              <Trans>Page not found!</Trans>\r\n            </Paragraph>\r\n          </Container>\r\n          <Image src={isDarkMode ? darkImage : lightImage} alt=\"Liluni\" />\r\n        </Header>\r\n        <SmallButtonPrimary as={Link} to=\"/\">\r\n          <Trans>Oops, take me back to Swap</Trans>\r\n        </SmallButtonPrimary>\r\n      </Trace>\r\n    </PageWrapper>\r\n  )\r\n}\r\n","import { BitmapCoordinatesRenderingScope, CanvasRenderingTarget2D } from 'fancy-canvas'\r\nimport {\r\n  CustomData,\r\n  CustomSeriesOptions,\r\n  ICustomSeriesPaneRenderer,\r\n  PaneRendererCustomData,\r\n  PriceToCoordinateConverter,\r\n  Time,\r\n  UTCTimestamp,\r\n} from 'lightweight-charts'\r\nimport { ColumnPosition, calculateColumnPositionsInPlace, positionsBox } from '../VolumeChart/utils'\r\n\r\nexport interface LiquidityBarData extends CustomData {\r\n  time: UTCTimestamp\r\n  tick: number\r\n  price0: string\r\n  price1: string\r\n  liquidity: number\r\n  amount0Locked: number\r\n  amount1Locked: number\r\n}\r\n\r\ninterface LiquidityBarItem {\r\n  x: number\r\n  y: number\r\n  column?: ColumnPosition\r\n  tick: number\r\n}\r\n\r\nexport interface LiquidityBarProps {\r\n  tokenAColor: string\r\n  tokenBColor: string\r\n  highlightColor: string\r\n  activeTick?: number\r\n  activeTickProgress?: number\r\n}\r\n\r\nexport interface LiquidityBarSeriesOptions extends CustomSeriesOptions, LiquidityBarProps {\r\n  hoveredTick?: number\r\n}\r\n\r\nexport class LiquidityBarSeriesRenderer<TData extends LiquidityBarData> implements ICustomSeriesPaneRenderer {\r\n  _data: PaneRendererCustomData<Time, TData> | null = null\r\n  _options: LiquidityBarProps & Partial<LiquidityBarSeriesOptions>\r\n\r\n  constructor(props: LiquidityBarProps) {\r\n    this._options = props\r\n    this._options.hoveredTick = props.activeTick\r\n  }\r\n\r\n  draw(target: CanvasRenderingTarget2D, priceConverter: PriceToCoordinateConverter): void {\r\n    target.useBitmapCoordinateSpace((scope) => this._drawImpl(scope, priceConverter))\r\n  }\r\n\r\n  update(data: PaneRendererCustomData<Time, TData>, options: LiquidityBarSeriesOptions): void {\r\n    this._data = data\r\n    this._options = { ...this._options, ...options }\r\n  }\r\n\r\n  _drawImpl(renderingScope: BitmapCoordinatesRenderingScope, priceToCoordinate: PriceToCoordinateConverter): void {\r\n    if (\r\n      this._data === null ||\r\n      this._data.bars.length === 0 ||\r\n      this._data.visibleRange === null ||\r\n      this._options === null\r\n    ) {\r\n      return\r\n    }\r\n    const ctx = renderingScope.context\r\n    const bars: LiquidityBarItem[] = this._data.bars.map((bar) => {\r\n      return {\r\n        x: bar.x,\r\n        y: priceToCoordinate(bar.originalData.liquidity) ?? 0,\r\n        tick: bar.originalData.tick,\r\n      }\r\n    })\r\n    calculateColumnPositionsInPlace(\r\n      bars,\r\n      this._data.barSpacing,\r\n      renderingScope.horizontalPixelRatio,\r\n      this._data.visibleRange.from,\r\n      this._data.visibleRange.to\r\n    )\r\n    const zeroY = priceToCoordinate(0) ?? 0\r\n    ctx.fillStyle = this._options.tokenAColor\r\n\r\n    for (let i = this._data.visibleRange.from; i < this._data.visibleRange.to; i++) {\r\n      const stack = bars[i]\r\n      const column = stack.column\r\n      const isCurrentTick = this._options.activeTick === stack.tick\r\n      const isHoveredTick = this._options.hoveredTick === stack.tick\r\n\r\n      if (!column) return\r\n      const width = Math.min(\r\n        Math.max(renderingScope.horizontalPixelRatio, column.right - column.left),\r\n        this._data.barSpacing * renderingScope.horizontalPixelRatio\r\n      )\r\n\r\n      // Create margin to make visual bars thin\r\n      const margin = 0.3 * width\r\n      const widthWithMargin = width - margin * 2\r\n      const totalBox = positionsBox(zeroY, stack.y, renderingScope.verticalPixelRatio)\r\n\r\n      if (isHoveredTick) {\r\n        const highlightOffset = 0.3 * ctx.canvas.height\r\n        const highlightLength = ctx.canvas.height - highlightOffset\r\n\r\n        // Draw background highlight bar\r\n        ctx.fillStyle = this._options.highlightColor\r\n        ctx.beginPath()\r\n        ctx.roundRect(column.left + margin, highlightOffset, widthWithMargin, highlightLength, 8)\r\n        ctx.fill()\r\n\r\n        ctx.globalAlpha = 1\r\n      } else {\r\n        // Reduce opacity of non-hovered bars\r\n        ctx.globalAlpha = 0.4\r\n      }\r\n\r\n      // Select color based on where current bar is in relation to activeTick\r\n      if (isCurrentTick) {\r\n        ctx.fillStyle = this._options.tokenBColor\r\n      } else if (this._options.activeTick === undefined) {\r\n        ctx.fillStyle = this._options.color ?? 'white'\r\n      } else if (this._options.activeTick > stack.tick) {\r\n        ctx.fillStyle = this._options.tokenBColor\r\n      } else if (this._options.activeTick < stack.tick) {\r\n        ctx.fillStyle = this._options.tokenAColor\r\n      }\r\n\r\n      // Draw bar\r\n      ctx.beginPath()\r\n      ctx.roundRect(column.left + margin, totalBox.position, widthWithMargin, totalBox.length, 8)\r\n      ctx.fill()\r\n\r\n      // Reset opacity\r\n      ctx.globalAlpha = 1\r\n\r\n      if (isCurrentTick && this._options.activeTickProgress) {\r\n        // Draw token A color on top of token B color for active range\r\n        ctx.globalCompositeOperation = 'source-atop'\r\n\r\n        // Token A color takes up activeTickProgress % of the bar height\r\n        const activeRangeAdjustedHeight = totalBox.length * this._options.activeTickProgress\r\n        const activeRangeAdjustedPosition = totalBox.position + (totalBox.length - activeRangeAdjustedHeight)\r\n\r\n        ctx.fillStyle = this._options.tokenAColor\r\n        ctx.beginPath()\r\n        ctx.fillRect(column.left, activeRangeAdjustedPosition, width, activeRangeAdjustedHeight)\r\n\r\n        // Reset composite operation to default\r\n        ctx.globalCompositeOperation = 'source-over'\r\n      }\r\n    }\r\n  }\r\n}\r\n","import {\r\n  customSeriesDefaultOptions,\r\n  CustomSeriesPricePlotValues,\r\n  ICustomSeriesPaneView,\r\n  PaneRendererCustomData,\r\n  Time,\r\n  WhitespaceData,\r\n} from 'lightweight-charts'\r\n\r\nimport { LiquidityBarData, LiquidityBarProps, LiquidityBarSeriesOptions, LiquidityBarSeriesRenderer } from './renderer'\r\n\r\nexport class LiquidityBarSeries<TData extends LiquidityBarData>\r\n  implements ICustomSeriesPaneView<Time, TData, LiquidityBarSeriesOptions>\r\n{\r\n  _renderer: LiquidityBarSeriesRenderer<TData>\r\n  _tokenAColor: string\r\n  _tokenBColor: string\r\n  _highlightColor: string\r\n\r\n  constructor(props: LiquidityBarProps) {\r\n    this._tokenAColor = props.tokenAColor\r\n    this._renderer = new LiquidityBarSeriesRenderer(props)\r\n    this._tokenBColor = props.tokenBColor\r\n    this._highlightColor = props.highlightColor\r\n  }\r\n\r\n  priceValueBuilder(plotRow: TData): CustomSeriesPricePlotValues {\r\n    return [0, plotRow.liquidity]\r\n  }\r\n\r\n  isWhitespace(data: TData | WhitespaceData): data is WhitespaceData {\r\n    return !(data as TData).liquidity\r\n  }\r\n\r\n  renderer(): LiquidityBarSeriesRenderer<TData> {\r\n    return this._renderer\r\n  }\r\n\r\n  update(data: PaneRendererCustomData<Time, TData>, options: LiquidityBarSeriesOptions): void {\r\n    this._renderer.update(data, options)\r\n  }\r\n\r\n  defaultOptions() {\r\n    return {\r\n      ...customSeriesDefaultOptions,\r\n      tokenAColor: this._tokenAColor,\r\n      tokenBColor: this._tokenBColor,\r\n      highlightColor: this._highlightColor,\r\n    }\r\n  }\r\n}\r\n","import { ChartHoverData, ChartModel, ChartModelParams } from 'components/Charts/ChartModel'\r\nimport { ISeriesApi, UTCTimestamp } from 'lightweight-charts'\r\n\r\nimport { ChainId, CurrencyAmount, Token } from '@uniswap/sdk-core'\r\nimport { FeeAmount, Pool, TICK_SPACINGS, TickMath, tickToPrice } from '@uniswap/v3-sdk'\r\nimport { BigNumber } from 'ethers/lib/ethers'\r\nimport { TickProcessed, usePoolActiveLiquidity } from 'hooks/usePoolTickData'\r\nimport JSBI from 'jsbi'\r\nimport { useEffect, useState } from 'react'\r\nimport { NumberType, useFormatter } from 'utils/formatNumbers'\r\nimport { LiquidityBarSeries } from './liquidity-bar-series'\r\nimport { LiquidityBarData, LiquidityBarProps, LiquidityBarSeriesOptions } from './renderer'\r\n\r\ninterface LiquidityBarChartModelParams extends ChartModelParams<LiquidityBarData>, LiquidityBarProps {}\r\n\r\nexport class LiquidityBarChartModel extends ChartModel<LiquidityBarData> {\r\n  protected series: ISeriesApi<'Custom'>\r\n  private activeTick?: number\r\n\r\n  constructor(chartDiv: HTMLDivElement, params: LiquidityBarChartModelParams) {\r\n    super(chartDiv, params)\r\n    this.series = this.api.addCustomSeries(new LiquidityBarSeries(params))\r\n\r\n    this.series.setData(this.data)\r\n\r\n    this.updateOptions(params)\r\n    this.fitContent()\r\n  }\r\n\r\n  updateOptions(params: LiquidityBarChartModelParams) {\r\n    super.updateOptions(params, {\r\n      localization: {\r\n        locale: params.locale,\r\n      },\r\n      rightPriceScale: {\r\n        visible: false,\r\n        borderVisible: false,\r\n        scaleMargins: {\r\n          top: 0.35,\r\n          bottom: 0,\r\n        },\r\n        autoScale: true,\r\n      },\r\n      timeScale: {\r\n        visible: false,\r\n        fixLeftEdge: true,\r\n        fixRightEdge: true,\r\n        borderVisible: false,\r\n      },\r\n      crosshair: {\r\n        horzLine: {\r\n          visible: false,\r\n          labelVisible: false,\r\n        },\r\n        vertLine: {\r\n          visible: false,\r\n          labelVisible: false,\r\n        },\r\n      },\r\n      grid: {\r\n        vertLines: {\r\n          visible: false,\r\n        },\r\n        horzLines: {\r\n          visible: false,\r\n        },\r\n      },\r\n    })\r\n    const { data, activeTick } = params\r\n\r\n    this.activeTick = activeTick\r\n\r\n    if (this.data !== data) {\r\n      this.data = data\r\n      this.series.setData(data)\r\n      this.fitContent()\r\n    }\r\n\r\n    this.series.applyOptions({\r\n      priceFormat: {\r\n        type: 'volume',\r\n      },\r\n      priceLineVisible: false,\r\n      lastValueVisible: false,\r\n    })\r\n\r\n    this.series.applyOptions(params)\r\n  }\r\n\r\n  override onSeriesHover(hoverData?: ChartHoverData<LiquidityBarData>) {\r\n    super.onSeriesHover(hoverData)\r\n    const updatedOptions: Partial<LiquidityBarSeriesOptions> = { hoveredTick: hoverData?.item.tick ?? this.activeTick }\r\n    this.series.applyOptions(updatedOptions)\r\n  }\r\n\r\n  activeTickIndex() {\r\n    return this.data.findIndex((bar) => bar.tick === this.activeTick)\r\n  }\r\n\r\n  fitContent() {\r\n    const length = this.data.length\r\n    const activeTickIndex = this.data.findIndex((bar) => bar.tick === this.activeTick)\r\n    const midPoint = activeTickIndex !== -1 ? activeTickIndex : length / 2\r\n\r\n    this.api\r\n      .timeScale()\r\n      .setVisibleLogicalRange({ from: Math.max(midPoint - 50, 0), to: Math.min(midPoint + 50, this.data.length) })\r\n  }\r\n}\r\n\r\nconst MAX_UINT128 = BigNumber.from(2).pow(128).sub(1)\r\n\r\nfunction maxAmount(token: Token) {\r\n  return CurrencyAmount.fromRawAmount(token, MAX_UINT128.toString())\r\n}\r\n\r\n/** Calculates tokens locked in the active tick range based on the current tick */\r\nasync function calculateActiveRangeTokensLocked(\r\n  token0: Token,\r\n  token1: Token,\r\n  feeTier: FeeAmount,\r\n  tick: TickProcessed,\r\n  poolData: {\r\n    sqrtPriceX96?: JSBI\r\n    currentTick?: number\r\n    liquidity?: JSBI\r\n  }\r\n): Promise<{ amount0Locked: number; amount1Locked: number } | undefined> {\r\n  if (!poolData.currentTick || !poolData.sqrtPriceX96 || !poolData.liquidity) {\r\n    return undefined\r\n  }\r\n\r\n  try {\r\n    const liqGross = JSBI.greaterThan(tick.liquidityNet, JSBI.BigInt(0))\r\n      ? tick.liquidityNet\r\n      : JSBI.multiply(tick.liquidityNet, JSBI.BigInt('-1'))\r\n\r\n    const mockTicks = [\r\n      {\r\n        index: tick.tick,\r\n        liquidityGross: liqGross,\r\n        liquidityNet: JSBI.multiply(tick.liquidityNet, JSBI.BigInt('-1')),\r\n      },\r\n      {\r\n        index: tick.tick + TICK_SPACINGS[feeTier],\r\n        liquidityGross: liqGross,\r\n        liquidityNet: tick.liquidityNet,\r\n      },\r\n    ]\r\n    // Initialize pool containing only the active range\r\n    const pool1 = new Pool(\r\n      token0,\r\n      token1,\r\n      feeTier,\r\n      poolData.sqrtPriceX96,\r\n      tick.liquidityActive,\r\n      poolData.currentTick,\r\n      mockTicks\r\n    )\r\n    // Calculate amount of token0 that would need to be swapped to reach the bottom of the range\r\n    const bottomOfRangePrice = TickMath.getSqrtRatioAtTick(mockTicks[0].index)\r\n    const token1Amount = (await pool1.getOutputAmount(maxAmount(token0), bottomOfRangePrice))[0]\r\n    const amount0Locked = parseFloat(tick.sdkPrice.invert().quote(token1Amount).toExact())\r\n\r\n    // Calculate amount of token1 that would need to be swapped to reach the top of the range\r\n    const topOfRangePrice = TickMath.getSqrtRatioAtTick(mockTicks[1].index)\r\n    const token0Amount = (await pool1.getOutputAmount(maxAmount(token1), topOfRangePrice))[0]\r\n    const amount1Locked = parseFloat(tick.sdkPrice.quote(token0Amount).toExact())\r\n\r\n    return { amount0Locked, amount1Locked }\r\n  } catch {\r\n    return { amount0Locked: 0, amount1Locked: 0 }\r\n  }\r\n}\r\n\r\n/** Returns amounts of tokens locked in the given tick. Reference: https://docs.uniswap.org/sdk/v3/guides/advanced/active-liquidity */\r\nasync function calculateTokensLocked(\r\n  token0: Token,\r\n  token1: Token,\r\n  feeTier: FeeAmount,\r\n  tick: TickProcessed\r\n): Promise<{ amount0Locked: number; amount1Locked: number }> {\r\n  try {\r\n    const tickSpacing = TICK_SPACINGS[feeTier]\r\n    const liqGross = JSBI.greaterThan(tick.liquidityNet, JSBI.BigInt(0))\r\n      ? tick.liquidityNet\r\n      : JSBI.multiply(tick.liquidityNet, JSBI.BigInt('-1'))\r\n\r\n    const sqrtPriceX96 = TickMath.getSqrtRatioAtTick(tick.tick)\r\n    const mockTicks = [\r\n      {\r\n        index: tick.tick,\r\n        liquidityGross: liqGross,\r\n        liquidityNet: JSBI.multiply(tick.liquidityNet, JSBI.BigInt('-1')),\r\n      },\r\n      {\r\n        index: tick.tick + TICK_SPACINGS[feeTier],\r\n        liquidityGross: liqGross,\r\n        liquidityNet: tick.liquidityNet,\r\n      },\r\n    ]\r\n\r\n    // Initialize pool containing only the current range\r\n    const pool = new Pool(token0, token1, Number(feeTier), sqrtPriceX96, tick.liquidityActive, tick.tick, mockTicks)\r\n\r\n    // Calculate token amounts that would need to be swapped to reach the next range\r\n    const nextSqrtX96 = TickMath.getSqrtRatioAtTick(tick.tick - tickSpacing)\r\n    const maxAmountToken0 = CurrencyAmount.fromRawAmount(token0, MAX_UINT128.toString())\r\n    const token1Amount = (await pool.getOutputAmount(maxAmountToken0, nextSqrtX96))[0]\r\n    const amount0Locked = parseFloat(tick.sdkPrice.invert().quote(token1Amount).toExact())\r\n    const amount1Locked = parseFloat(token1Amount.toExact())\r\n\r\n    return { amount0Locked, amount1Locked }\r\n  } catch {\r\n    return { amount0Locked: 0, amount1Locked: 0 }\r\n  }\r\n}\r\n\r\nexport function useLiquidityBarData({\r\n  tokenA,\r\n  tokenB,\r\n  feeTier,\r\n  isReversed,\r\n  chainId,\r\n}: {\r\n  tokenA: Token\r\n  tokenB: Token\r\n  feeTier: FeeAmount\r\n  isReversed: boolean\r\n  chainId: ChainId\r\n}) {\r\n  const { formatNumber, formatPrice } = useFormatter()\r\n  const activePoolData = usePoolActiveLiquidity(tokenA, tokenB, feeTier, chainId)\r\n\r\n  const [tickData, setTickData] = useState<{\r\n    barData: LiquidityBarData[]\r\n    activeRangeData?: LiquidityBarData\r\n    activeRangePercentage?: number\r\n  }>()\r\n\r\n  useEffect(() => {\r\n    async function formatData() {\r\n      const ticksProcessed = activePoolData.data\r\n      if (!ticksProcessed) return\r\n\r\n      let activeRangePercentage: number | undefined = undefined\r\n      let activeRangeIndex: number | undefined = undefined\r\n\r\n      const barData: LiquidityBarData[] = []\r\n      for (let index = 0; index < ticksProcessed.length; index++) {\r\n        const t = ticksProcessed[index]\r\n\r\n        // Lightweight-charts require the x-axis to be time; a fake time base on index is provided\r\n        const fakeTime = (isReversed ? index * 1000 : (ticksProcessed.length - index) * 1000) as UTCTimestamp\r\n        const isActive = activePoolData.activeTick === t.tick\r\n\r\n        let price0 = t.sdkPrice\r\n        let price1 = t.sdkPrice.invert()\r\n\r\n        if (isActive && activePoolData.activeTick && activePoolData.currentTick) {\r\n          activeRangeIndex = index\r\n          activeRangePercentage = (activePoolData.currentTick - t.tick) / TICK_SPACINGS[feeTier]\r\n\r\n          price0 = tickToPrice(tokenA, tokenB, t.tick)\r\n          price1 = price0.invert()\r\n        }\r\n\r\n        const { amount0Locked, amount1Locked } = await calculateTokensLocked(tokenA, tokenB, feeTier, t)\r\n\r\n        barData.push({\r\n          tick: t.tick,\r\n          liquidity: parseFloat(t.liquidityActive.toString()),\r\n          price0: formatPrice({ price: price0, type: NumberType.SwapDetailsAmount }),\r\n          price1: formatPrice({ price: price1, type: NumberType.SwapDetailsAmount }),\r\n          time: fakeTime,\r\n          amount0Locked,\r\n          amount1Locked,\r\n        })\r\n      }\r\n\r\n      // offset the values to line off bars with TVL used to swap across bar\r\n      barData?.map((entry, i) => {\r\n        if (i > 0) {\r\n          barData[i - 1].amount0Locked = entry.amount0Locked\r\n          barData[i - 1].amount1Locked = entry.amount1Locked\r\n        }\r\n      })\r\n\r\n      const activeRangeData = activeRangeIndex !== undefined ? barData[activeRangeIndex] : undefined\r\n      // For active range, adjust amounts locked to adjust for where current tick/price is within the range\r\n      if (activeRangeIndex !== undefined && activeRangeData) {\r\n        const activeTickTvl = await calculateActiveRangeTokensLocked(\r\n          tokenA,\r\n          tokenB,\r\n          feeTier,\r\n          ticksProcessed[activeRangeIndex],\r\n          activePoolData\r\n        )\r\n        barData[activeRangeIndex] = { ...activeRangeData, ...activeTickTvl }\r\n      }\r\n\r\n      // Reverse data so that token0 is on the left by default\r\n      if (!isReversed) {\r\n        barData.reverse()\r\n      }\r\n\r\n      // TODO(WEB-3672): investigate why negative/inaccurate liquidity values that are appearing from computeSurroundingTicks\r\n      setTickData({ barData: barData.filter((t) => t.liquidity > 0), activeRangeData, activeRangePercentage })\r\n    }\r\n\r\n    formatData()\r\n  }, [activePoolData, tokenA, tokenB, formatNumber, formatPrice, isReversed, feeTier])\r\n\r\n  return { tickData, activeTick: activePoolData.activeTick, loading: activePoolData.isLoading || !tickData }\r\n}\r\n","import { ChainId, CurrencyAmount, Token } from '@uniswap/sdk-core'\r\nimport { FeeAmount } from '@uniswap/v3-sdk'\r\nimport { ChartHeader } from 'components/Charts/ChartHeader'\r\nimport { Chart } from 'components/Charts/ChartModel'\r\nimport { LiquidityBarChartModel, useLiquidityBarData } from 'components/Charts/LiquidityChart'\r\nimport { LiquidityBarData } from 'components/Charts/LiquidityChart/renderer'\r\nimport { ChartSkeleton } from 'components/Charts/LoadingState'\r\nimport { PriceChartData, PriceChartDelta, PriceChartModel } from 'components/Charts/PriceChart'\r\nimport { refitChartContentAtom } from 'components/Charts/TimeSelector'\r\nimport { VolumeChart } from 'components/Charts/VolumeChart'\r\nimport { SingleHistogramData } from 'components/Charts/VolumeChart/renderer'\r\nimport { ChartType, PriceChartType } from 'components/Charts/utils'\r\nimport PillMultiToggle from 'components/Toggle/PillMultiToggle'\r\nimport { ChartActionsContainer, DEFAULT_PILL_TIME_SELECTOR_OPTIONS } from 'components/Tokens/TokenDetails/ChartSection'\r\nimport { ChartTypeDropdown } from 'components/Tokens/TokenDetails/ChartSection/ChartTypeSelector'\r\nimport { ChartQueryResult, DataQuality } from 'components/Tokens/TokenDetails/ChartSection/util'\r\nimport { LoadingChart } from 'components/Tokens/TokenDetails/Skeleton'\r\nimport { DISPLAYS, TimePeriodDisplay, getTimePeriodFromDisplay } from 'components/Tokens/TokenTable/TimeSelector'\r\nimport { PoolData } from 'graphql/data/pools/usePoolData'\r\nimport { TimePeriod, gqlToCurrency, supportedChainIdFromGQLChain, toHistoryDuration } from 'graphql/data/util'\r\nimport useStablecoinPrice from 'hooks/useStablecoinPrice'\r\nimport { Trans, t } from 'i18n'\r\nimport { useAtomValue } from 'jotai/utils'\r\nimport { useMemo, useState } from 'react'\r\nimport styled, { useTheme } from 'styled-components'\r\nimport { EllipsisStyle, ThemedText } from 'theme/components'\r\nimport { textFadeIn } from 'theme/styles'\r\nimport { Chain, ProtocolVersion } from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\nimport { NumberType, useFormatter } from 'utils/formatNumbers'\r\nimport { usePDPPriceChartData, usePDPVolumeChartData } from './hooks'\r\n\r\nconst PDP_CHART_HEIGHT_PX = 356\r\nconst PDP_CHART_SELECTOR_OPTIONS = [ChartType.VOLUME, ChartType.PRICE, ChartType.LIQUIDITY] as const\r\nexport type PoolsDetailsChartType = (typeof PDP_CHART_SELECTOR_OPTIONS)[number]\r\n\r\nconst TimePeriodSelectorContainer = styled.div`\r\n  @media only screen and (max-width: ${({ theme }) => theme.breakpoint.sm}px) {\r\n    width: 100%;\r\n  }\r\n`\r\nconst ChartTypeSelectorContainer = styled.div`\r\n  display: flex;\r\n  gap: 8px;\r\n\r\n  @media only screen and (max-width: ${({ theme }) => theme.breakpoint.sm}px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nconst StyledChart: typeof Chart = styled(Chart)`\r\n  height: ${PDP_CHART_HEIGHT_PX}px;\r\n`\r\n\r\nconst PDPChartTypeSelector = ({\r\n  chartType,\r\n  onChartTypeChange,\r\n}: {\r\n  chartType: PoolsDetailsChartType\r\n  onChartTypeChange: (c: PoolsDetailsChartType) => void\r\n}) => (\r\n  <ChartTypeSelectorContainer>\r\n    <ChartTypeDropdown\r\n      options={PDP_CHART_SELECTOR_OPTIONS}\r\n      currentChartType={chartType}\r\n      onSelectOption={onChartTypeChange}\r\n    />\r\n  </ChartTypeSelectorContainer>\r\n)\r\n\r\ninterface ChartSectionProps {\r\n  poolData?: PoolData\r\n  loading: boolean\r\n  isReversed: boolean\r\n  chain?: Chain\r\n}\r\n\r\n/** Represents a variety of query result shapes, discriminated via additional `chartType` field. */\r\ntype ActiveQuery =\r\n  | ChartQueryResult<PriceChartData, ChartType.PRICE>\r\n  | ChartQueryResult<SingleHistogramData, ChartType.VOLUME>\r\n  | ChartQueryResult<undefined, ChartType.LIQUIDITY>\r\n\r\ntype TDPChartState = {\r\n  timePeriod: TimePeriod\r\n  setTimePeriod: (timePeriod: TimePeriod) => void\r\n  setChartType: (chartType: PoolsDetailsChartType) => void\r\n  activeQuery: ActiveQuery\r\n  dataQuality?: DataQuality\r\n}\r\n\r\nfunction usePDPChartState(\r\n  poolData: PoolData | undefined,\r\n  tokenA: Token | undefined,\r\n  tokenB: Token | undefined,\r\n  isReversed: boolean,\r\n  chain: Chain,\r\n  protocolVersion: ProtocolVersion\r\n): TDPChartState {\r\n  const [timePeriod, setTimePeriod] = useState<TimePeriod>(TimePeriod.DAY)\r\n  const [chartType, setChartType] = useState<PoolsDetailsChartType>(ChartType.VOLUME)\r\n\r\n  const isV3 = protocolVersion === ProtocolVersion.V3\r\n  const variables = { address: poolData?.address ?? '', chain, duration: toHistoryDuration(timePeriod), isV3 }\r\n\r\n  const priceQuery = usePDPPriceChartData(variables, poolData, tokenA, tokenB, isReversed)\r\n  const volumeQuery = usePDPVolumeChartData(variables)\r\n\r\n  return useMemo(() => {\r\n    const activeQuery = (() => {\r\n      switch (chartType) {\r\n        case ChartType.PRICE:\r\n          return priceQuery\r\n        case ChartType.VOLUME:\r\n          return volumeQuery\r\n        case ChartType.LIQUIDITY:\r\n          return {\r\n            chartType: ChartType.LIQUIDITY as const,\r\n            entries: [],\r\n            loading: false,\r\n            dataQuality: DataQuality.VALID,\r\n          }\r\n      }\r\n    })()\r\n\r\n    return {\r\n      timePeriod,\r\n      setTimePeriod,\r\n      setChartType,\r\n      activeQuery,\r\n    }\r\n  }, [chartType, volumeQuery, priceQuery, timePeriod])\r\n}\r\n\r\nexport default function ChartSection(props: ChartSectionProps) {\r\n  const [currencyA, currencyB] = [\r\n    props.poolData?.token0 && gqlToCurrency(props.poolData.token0),\r\n    props.poolData?.token1 && gqlToCurrency(props.poolData.token1),\r\n  ]\r\n\r\n  const { setChartType, timePeriod, setTimePeriod, activeQuery } = usePDPChartState(\r\n    props.poolData,\r\n    currencyA?.wrapped,\r\n    currencyB?.wrapped,\r\n    props.isReversed,\r\n    props.chain ?? Chain.Ethereum,\r\n    props.poolData?.protocolVersion ?? ProtocolVersion.V3\r\n  )\r\n\r\n  const refitChartContent = useAtomValue(refitChartContentAtom)\r\n\r\n  // TODO(WEB-3740): Integrate BE tick query, remove special casing for liquidity chart\r\n  const loading = props.loading || (activeQuery.chartType !== ChartType.LIQUIDITY ? activeQuery?.loading : false)\r\n\r\n  const ChartBody = (() => {\r\n    if (!currencyA || !currencyB || !props.poolData || !props.chain) {\r\n      return <ChartSkeleton type={activeQuery.chartType} height={PDP_CHART_HEIGHT_PX} />\r\n    }\r\n\r\n    const selectedChartProps = {\r\n      ...props,\r\n      feeTier: Number(props.poolData.feeTier),\r\n      height: PDP_CHART_HEIGHT_PX,\r\n      timePeriod,\r\n      tokenA: currencyA.wrapped,\r\n      tokenB: currencyB.wrapped,\r\n      chainId: supportedChainIdFromGQLChain(props.chain) ?? ChainId.MAINNET,\r\n    }\r\n\r\n    // TODO(WEB-3740): Integrate BE tick query, remove special casing for liquidity chart\r\n    if (activeQuery.chartType === ChartType.LIQUIDITY) {\r\n      return <LiquidityChart {...selectedChartProps} />\r\n    }\r\n    if (activeQuery.dataQuality === DataQuality.INVALID || !currencyA || !currencyB) {\r\n      const errorText = loading ? undefined : <Trans>Unable to display historical data for the current pool.</Trans>\r\n      return <ChartSkeleton type={activeQuery.chartType} height={PDP_CHART_HEIGHT_PX} errorText={errorText} />\r\n    }\r\n\r\n    const stale = activeQuery.dataQuality === DataQuality.STALE\r\n\r\n    switch (activeQuery.chartType) {\r\n      case ChartType.PRICE:\r\n        return <PriceChart {...selectedChartProps} data={activeQuery.entries} stale={stale} />\r\n      case ChartType.VOLUME:\r\n        return <VolumeChart {...selectedChartProps} data={activeQuery.entries} stale={stale} />\r\n    }\r\n  })()\r\n\r\n  // BE does not support hourly price data for pools\r\n  const filteredTimeOptions = useMemo(() => {\r\n    if (activeQuery.chartType === ChartType.PRICE) {\r\n      return DEFAULT_PILL_TIME_SELECTOR_OPTIONS.filter((option) => option.value !== TimePeriodDisplay.HOUR)\r\n    }\r\n    return DEFAULT_PILL_TIME_SELECTOR_OPTIONS\r\n  }, [activeQuery.chartType])\r\n\r\n  return (\r\n    <div data-testid=\"pdp-chart-container\">\r\n      {ChartBody}\r\n      <ChartActionsContainer>\r\n        <PDPChartTypeSelector chartType={activeQuery.chartType} onChartTypeChange={setChartType} />\r\n        {activeQuery.chartType !== ChartType.LIQUIDITY && (\r\n          <TimePeriodSelectorContainer>\r\n            <PillMultiToggle\r\n              options={filteredTimeOptions}\r\n              currentSelected={DISPLAYS[timePeriod]}\r\n              onSelectOption={(option) => {\r\n                const time = getTimePeriodFromDisplay(option as TimePeriodDisplay)\r\n                if (time === timePeriod) {\r\n                  refitChartContent?.()\r\n                } else {\r\n                  setTimePeriod(time)\r\n                }\r\n              }}\r\n            />\r\n          </TimePeriodSelectorContainer>\r\n        )}\r\n      </ChartActionsContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst PriceDisplayContainer = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  column-gap: 4px;\r\n`\r\n\r\nconst ChartPriceText = styled(ThemedText.HeadlineMedium)`\r\n  ${EllipsisStyle}\r\n  @media screen and (max-width: ${({ theme }) => theme.breakpoint.sm}px) {\r\n    font-size: 24px !important;\r\n    line-height: 32px !important;\r\n  }\r\n`\r\n\r\nfunction PriceChart({\r\n  tokenA,\r\n  tokenB,\r\n  isReversed,\r\n  data,\r\n  stale,\r\n}: {\r\n  tokenA: Token\r\n  tokenB: Token\r\n  isReversed: boolean\r\n  data: PriceChartData[]\r\n  stale: boolean\r\n}) {\r\n  const { formatCurrencyAmount, formatPrice } = useFormatter()\r\n  const [primaryToken, referenceToken] = isReversed ? [tokenB, tokenA] : [tokenA, tokenB]\r\n\r\n  const params = useMemo(() => ({ data, stale, type: PriceChartType.LINE }), [data, stale])\r\n\r\n  const stablecoinPrice = useStablecoinPrice(primaryToken)\r\n\r\n  const lastPrice = data[data.length - 1]\r\n  return (\r\n    <StyledChart Model={PriceChartModel} params={params}>\r\n      {(crosshairData) => {\r\n        const displayValue = crosshairData ?? lastPrice\r\n        const currencyBAmountRaw = Math.floor(\r\n          (displayValue.value ?? displayValue.close) * 10 ** referenceToken.decimals\r\n        )\r\n        const priceDisplay = (\r\n          <PriceDisplayContainer>\r\n            <ChartPriceText>\r\n              {`1 ${primaryToken.symbol} = ${formatCurrencyAmount({\r\n                amount: CurrencyAmount.fromRawAmount(referenceToken, currencyBAmountRaw),\r\n              })} \r\n            ${referenceToken.symbol}`}\r\n            </ChartPriceText>\r\n            <ChartPriceText color=\"neutral2\">\r\n              {stablecoinPrice ? '(' + formatPrice({ price: stablecoinPrice }) + ')' : ''}\r\n            </ChartPriceText>\r\n          </PriceDisplayContainer>\r\n        )\r\n        return (\r\n          <ChartHeader\r\n            value={priceDisplay}\r\n            additionalFields={<PriceChartDelta startingPrice={data[0]} endingPrice={displayValue} />}\r\n            valueFormatterType={NumberType.FiatTokenPrice}\r\n            time={crosshairData?.time}\r\n          />\r\n        )\r\n      }}\r\n    </StyledChart>\r\n  )\r\n}\r\n\r\nconst FadeInHeading = styled(ThemedText.H1Medium)`\r\n  ${textFadeIn};\r\n  line-height: 32px;\r\n`\r\nconst FadeInSubheader = styled(ThemedText.SubHeader)`\r\n  ${textFadeIn}\r\n`\r\n\r\nfunction LiquidityTooltipDisplay({\r\n  data,\r\n  tokenADescriptor,\r\n  tokenBDescriptor,\r\n  currentTick,\r\n}: {\r\n  data: LiquidityBarData\r\n  tokenADescriptor: string\r\n  tokenBDescriptor: string\r\n  currentTick?: number\r\n}) {\r\n  const { formatNumber } = useFormatter()\r\n  if (!currentTick) return null\r\n\r\n  const displayValue0 =\r\n    data.tick >= currentTick\r\n      ? formatNumber({\r\n          input: data.amount0Locked,\r\n          type: NumberType.TokenQuantityStats,\r\n        })\r\n      : 0\r\n  const displayValue1 =\r\n    data.tick <= currentTick\r\n      ? formatNumber({\r\n          input: data.amount1Locked,\r\n          type: NumberType.TokenQuantityStats,\r\n        })\r\n      : 0\r\n\r\n  return (\r\n    <>\r\n      <ThemedText.BodySmall>\r\n        {t(`{{token}} liquidity: {{name}}`, { token: tokenADescriptor, name: displayValue0 })}\r\n      </ThemedText.BodySmall>\r\n      <ThemedText.BodySmall>\r\n        {t(`{{token}} liquidity: {{name}}`, { token: tokenBDescriptor, name: displayValue1 })}\r\n      </ThemedText.BodySmall>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction LiquidityChart({\r\n  tokenA,\r\n  tokenB,\r\n  feeTier,\r\n  isReversed,\r\n  chainId,\r\n}: {\r\n  tokenA: Token\r\n  tokenB: Token\r\n  feeTier: FeeAmount\r\n  isReversed: boolean\r\n  chainId: ChainId\r\n}) {\r\n  const tokenADescriptor = tokenA.symbol ?? tokenA.name ?? t`Token A`\r\n  const tokenBDescriptor = tokenB.symbol ?? tokenB.name ?? t`Token B`\r\n\r\n  const { tickData, activeTick, loading } = useLiquidityBarData({\r\n    tokenA,\r\n    tokenB,\r\n    feeTier,\r\n    isReversed,\r\n    chainId,\r\n  })\r\n\r\n  const theme = useTheme()\r\n  const params = useMemo(() => {\r\n    return {\r\n      data: tickData?.barData ?? [],\r\n      tokenAColor: isReversed ? theme.token1 : theme.token0,\r\n      tokenBColor: isReversed ? theme.token0 : theme.token1,\r\n      highlightColor: theme.surface3,\r\n      activeTick,\r\n      activeTickProgress: tickData?.activeRangePercentage,\r\n    }\r\n  }, [activeTick, isReversed, theme, tickData])\r\n\r\n  if (loading) return <LoadingChart />\r\n\r\n  return (\r\n    <StyledChart\r\n      Model={LiquidityBarChartModel}\r\n      params={params}\r\n      TooltipBody={\r\n        // TODO(WEB-3628): investigate potential off-by-one or subgraph issues causing calculated TVL issues on 1 bip pools\r\n        feeTier !== FeeAmount.LOWEST\r\n          ? ({ data }: { data: LiquidityBarData }) => (\r\n              <LiquidityTooltipDisplay\r\n                data={data}\r\n                tokenADescriptor={tokenADescriptor}\r\n                tokenBDescriptor={tokenBDescriptor}\r\n                currentTick={tickData?.activeRangeData?.tick}\r\n              />\r\n            )\r\n          : undefined\r\n      }\r\n    >\r\n      {(crosshair) => {\r\n        const displayPoint = crosshair ?? tickData?.activeRangeData\r\n        const display = (\r\n          <div>\r\n            <FadeInHeading>{`1 ${tokenADescriptor} = ${displayPoint?.price0} ${tokenBDescriptor}`}</FadeInHeading>\r\n            <FadeInHeading>{`1 ${tokenBDescriptor} = ${displayPoint?.price1} ${tokenADescriptor}`}</FadeInHeading>\r\n            {displayPoint && displayPoint.tick === activeTick && (\r\n              <FadeInSubheader color=\"neutral2\" paddingTop=\"4px\">\r\n                <Trans>Active tick range</Trans>\r\n              </FadeInSubheader>\r\n            )}\r\n          </div>\r\n        )\r\n        return <ChartHeader value={display} />\r\n      }}\r\n    </StyledChart>\r\n  )\r\n}\r\n","import { Token } from '@uniswap/sdk-core'\r\nimport { PriceChartData } from 'components/Charts/PriceChart'\r\nimport { SingleHistogramData } from 'components/Charts/VolumeChart/renderer'\r\nimport { ChartType } from 'components/Charts/utils'\r\nimport {\r\n  ChartQueryResult,\r\n  DataQuality,\r\n  checkDataQuality,\r\n  withUTCTimestamp,\r\n} from 'components/Tokens/TokenDetails/ChartSection/util'\r\nimport { PoolData } from 'graphql/data/pools/usePoolData'\r\nimport { UTCTimestamp } from 'lightweight-charts'\r\nimport { useMemo } from 'react'\r\nimport {\r\n  Chain,\r\n  HistoryDuration,\r\n  TimestampedAmount,\r\n  TimestampedPoolPrice,\r\n  usePoolPriceHistoryQuery,\r\n  usePoolVolumeHistoryQuery,\r\n} from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\n\r\ntype PDPChartQueryVars = { address: string; chain: Chain; duration: HistoryDuration; isV3: boolean }\r\nexport function usePDPPriceChartData(\r\n  variables: PDPChartQueryVars,\r\n  poolData: PoolData | undefined,\r\n  tokenA: Token | undefined,\r\n  tokenB: Token | undefined,\r\n  isReversed: boolean\r\n): ChartQueryResult<PriceChartData, ChartType.PRICE> {\r\n  const { data, loading } = usePoolPriceHistoryQuery({ variables })\r\n\r\n  return useMemo(() => {\r\n    const { priceHistory } = data?.v2Pair ?? data?.v3Pool ?? {}\r\n    const referenceToken = isReversed ? tokenA : tokenB\r\n\r\n    const entries =\r\n      priceHistory\r\n        ?.filter((price): price is TimestampedPoolPrice => price !== null)\r\n        .map((price) => {\r\n          const value =\r\n            poolData?.token0.address === referenceToken?.address.toLowerCase() ? price?.token0Price : price?.token1Price\r\n\r\n          return {\r\n            time: price.timestamp as UTCTimestamp,\r\n            value,\r\n            open: value,\r\n            high: value,\r\n            low: value,\r\n            close: value,\r\n          }\r\n        }) ?? []\r\n\r\n    // TODO(WEB-3769): Append current price based on active tick to entries\r\n    /* const dataQuality = checkDataQuality(entries, ChartType.PRICE, variables.duration) */\r\n    const dataQuality = loading || !priceHistory ? DataQuality.INVALID : DataQuality.VALID\r\n\r\n    return { chartType: ChartType.PRICE, entries, loading, dataQuality }\r\n  }, [data?.v2Pair, data?.v3Pool, isReversed, loading, poolData?.token0.address, tokenA, tokenB])\r\n}\r\n\r\nexport function usePDPVolumeChartData(\r\n  variables: PDPChartQueryVars\r\n): ChartQueryResult<SingleHistogramData, ChartType.VOLUME> {\r\n  const { data, loading } = usePoolVolumeHistoryQuery({ variables })\r\n\r\n  return useMemo(() => {\r\n    const { historicalVolume } = data?.v2Pair ?? data?.v3Pool ?? {}\r\n    const entries =\r\n      historicalVolume?.filter((amt): amt is TimestampedAmount => amt !== null).map(withUTCTimestamp) ?? []\r\n\r\n    const dataQuality = checkDataQuality(entries, ChartType.VOLUME, variables.duration)\r\n\r\n    return { chartType: ChartType.VOLUME, entries, loading, dataQuality }\r\n  }, [data?.v2Pair, data?.v3Pool, loading, variables.duration])\r\n}\r\n","import { LoadingBubble } from 'components/Tokens/loading'\r\nimport styled from 'styled-components'\r\n\r\nexport const DetailBubble = styled(LoadingBubble)<{ $height?: number; $width?: number }>`\r\n  height: ${({ $height }) => ($height ? `${$height}px` : '16px')};\r\n  width: ${({ $width }) => ($width ? `${$width}px` : '80px')};\r\n`\r\n\r\nexport const SmallDetailBubble = styled(LoadingBubble)`\r\n  height: 20px;\r\n  width: 20px;\r\n  border-radius: 100px;\r\n`\r\n","import { ChainId, Percent } from '@uniswap/sdk-core'\r\nimport { BreadcrumbNavContainer, BreadcrumbNavLink, CurrentPageBreadcrumb } from 'components/BreadcrumbNav'\r\nimport Column from 'components/Column'\r\nimport { DropdownSelector } from 'components/DropdownSelector'\r\nimport { EtherscanLogo } from 'components/Icons/Etherscan'\r\nimport { ExplorerIcon } from 'components/Icons/ExplorerIcon'\r\nimport { ReverseArrow } from 'components/Icons/ReverseArrow'\r\nimport CurrencyLogo from 'components/Logo/CurrencyLogo'\r\nimport Row from 'components/Row'\r\nimport ShareButton from 'components/Tokens/TokenDetails/ShareButton'\r\nimport { StyledExternalLink } from 'components/Tokens/TokenDetails/TokenDetailsHeader'\r\nimport { ActionButtonStyle, ActionMenuFlyoutStyle } from 'components/Tokens/TokenDetails/shared'\r\nimport { LoadingBubble } from 'components/Tokens/loading'\r\nimport { BIPS_BASE } from 'constants/misc'\r\nimport { NATIVE_CHAIN_ID } from 'constants/tokens'\r\nimport { getTokenDetailsURL, gqlToCurrency } from 'graphql/data/util'\r\nimport { useScreenSize } from 'hooks/screenSize'\r\nimport { useOnClickOutside } from 'hooks/useOnClickOutside'\r\nimport { Trans, t } from 'i18n'\r\nimport React, { useMemo, useReducer, useRef } from 'react'\r\nimport { ChevronRight, ExternalLink as ExternalLinkIcon } from 'react-feather'\r\nimport { Link } from 'react-router-dom'\r\nimport styled, { css, useTheme } from 'styled-components'\r\nimport { ClickableStyle, EllipsisStyle, ThemedText } from 'theme/components'\r\nimport { textFadeIn } from 'theme/styles'\r\nimport { ProtocolVersion, Token } from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\nimport { shortenAddress } from 'utilities/src/addresses'\r\nimport { ExplorerDataType, getExplorerLink } from 'utils/getExplorerLink'\r\n\r\nimport { DoubleCurrencyAndChainLogo } from 'components/DoubleLogo'\r\nimport { SupportedInterfaceChainId, chainIdToBackendChain } from 'constants/chains'\r\nimport { useFormatter } from 'utils/formatNumbers'\r\nimport { DetailBubble } from './shared'\r\n\r\nconst HeaderContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: 'flex-start';\r\n  width: 100%;\r\n  ${textFadeIn};\r\n  animation-duration: ${({ theme }) => theme.transition.duration.medium};\r\n`\r\n\r\nconst Badge = styled(ThemedText.LabelMicro)`\r\n  background: ${({ theme }) => theme.surface2};\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n`\r\n\r\nconst ToggleReverseArrows = styled(ReverseArrow)`\r\n  ${ClickableStyle}\r\n  fill: ${({ theme }) => theme.neutral2};\r\n`\r\n\r\nconst IconBubble = styled(LoadingBubble)`\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n`\r\n\r\ninterface PoolDetailsBreadcrumbProps {\r\n  chainId?: SupportedInterfaceChainId\r\n  poolAddress?: string\r\n  token0?: Token\r\n  token1?: Token\r\n  loading?: boolean\r\n}\r\n\r\nexport function PoolDetailsBreadcrumb({ chainId, poolAddress, token0, token1, loading }: PoolDetailsBreadcrumbProps) {\r\n  const chainName = chainIdToBackendChain({ chainId, withFallback: true })\r\n  const exploreOrigin = `/explore/${chainName.toLowerCase()}`\r\n  const poolsOrigin = `/explore/pools/${chainName.toLowerCase()}`\r\n\r\n  return (\r\n    <BreadcrumbNavContainer aria-label=\"breadcrumb-nav\">\r\n      <BreadcrumbNavLink to={exploreOrigin}>\r\n        <Trans>Explore</Trans> <ChevronRight size={14} />\r\n      </BreadcrumbNavLink>\r\n      <BreadcrumbNavLink to={poolsOrigin}>\r\n        <Trans>Pools</Trans> <ChevronRight size={14} />\r\n      </BreadcrumbNavLink>\r\n      {loading || !poolAddress ? (\r\n        <DetailBubble $width={200} />\r\n      ) : (\r\n        <CurrentPageBreadcrumb address={poolAddress} poolName={`${token0?.symbol} / ${token1?.symbol}`} />\r\n      )}\r\n    </BreadcrumbNavContainer>\r\n  )\r\n}\r\n\r\nconst StyledPoolDetailsTitle = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 12px;\r\n  width: max-content;\r\n  align-items: center;\r\n`\r\n\r\nconst PoolName = styled(ThemedText.HeadlineMedium)`\r\n  font-size: 24px !important;\r\n\r\n  @media screen and (max-width: ${({ theme }) => theme.breakpoint.sm}px) {\r\n    font-size: 18px !important;\r\n    line-height: 24px !important;\r\n  }\r\n`\r\n\r\nconst PoolDetailsTitle = ({\r\n  token0,\r\n  token1,\r\n  chainId,\r\n  feeTier,\r\n  protocolVersion,\r\n  toggleReversed,\r\n}: {\r\n  token0?: Token\r\n  token1?: Token\r\n  chainId?: SupportedInterfaceChainId\r\n  feeTier?: number\r\n  protocolVersion?: ProtocolVersion\r\n  toggleReversed: React.DispatchWithoutAction\r\n}) => {\r\n  const { formatPercent } = useFormatter()\r\n  const feePercent = feeTier && formatPercent(new Percent(feeTier, BIPS_BASE * 100))\r\n  return (\r\n    <StyledPoolDetailsTitle>\r\n      <div>\r\n        <PoolName>\r\n          <StyledLink\r\n            to={getTokenDetailsURL({\r\n              address: token0?.address,\r\n              chain: chainIdToBackendChain({ chainId, withFallback: true }),\r\n            })}\r\n          >\r\n            {token0?.symbol}\r\n          </StyledLink>\r\n          &nbsp;/&nbsp;\r\n          <StyledLink\r\n            to={getTokenDetailsURL({\r\n              address: token1?.address,\r\n              chain: chainIdToBackendChain({ chainId, withFallback: true }),\r\n            })}\r\n          >\r\n            {token1?.symbol}\r\n          </StyledLink>\r\n        </PoolName>\r\n      </div>\r\n      {protocolVersion === ProtocolVersion.V2 && <Badge>v2</Badge>}\r\n      {!!feePercent && <Badge>{feePercent}</Badge>}\r\n      <ToggleReverseArrows data-testid=\"toggle-tokens-reverse-arrows\" onClick={toggleReversed} />\r\n    </StyledPoolDetailsTitle>\r\n  )\r\n}\r\n\r\nconst ContractsDropdownRowContainer = styled(Row)`\r\n  align-items: center;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  gap: 12px;\r\n  padding: 10px 8px;\r\n  border-radius: 8px;\r\n  &:hover {\r\n    background: ${({ theme }) => theme.surface3};\r\n  }\r\n`\r\n\r\nconst ContractsDropdownRow = ({\r\n  address,\r\n  chainId,\r\n  tokens,\r\n}: {\r\n  address?: string\r\n  chainId?: number\r\n  tokens: (Token | undefined)[]\r\n}) => {\r\n  const theme = useTheme()\r\n  const currency = tokens[0] && gqlToCurrency(tokens[0])\r\n  const isPool = tokens.length === 2\r\n  const currencies = isPool && tokens[1] ? [currency, gqlToCurrency(tokens[1])] : [currency]\r\n  const isNative = address === NATIVE_CHAIN_ID\r\n  const explorerUrl =\r\n    chainId &&\r\n    address &&\r\n    getExplorerLink(\r\n      chainId,\r\n      address,\r\n      isNative ? ExplorerDataType.NATIVE : isPool ? ExplorerDataType.ADDRESS : ExplorerDataType.TOKEN\r\n    )\r\n\r\n  if (!chainId || !explorerUrl) {\r\n    return (\r\n      <ContractsDropdownRowContainer>\r\n        <DetailBubble $width={117} />\r\n      </ContractsDropdownRowContainer>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <StyledExternalLink href={explorerUrl}>\r\n      <ContractsDropdownRowContainer>\r\n        <Row gap=\"sm\">\r\n          {isPool ? (\r\n            <DoubleCurrencyAndChainLogo chainId={chainId} currencies={currencies} size={24} />\r\n          ) : (\r\n            <CurrencyLogo currency={currency} size={24} />\r\n          )}\r\n          <ThemedText.BodyPrimary>{isPool ? <Trans>Pool</Trans> : tokens[0]?.symbol}</ThemedText.BodyPrimary>\r\n          <ThemedText.BodySecondary>{shortenAddress(address)}</ThemedText.BodySecondary>\r\n        </Row>\r\n        <ExternalLinkIcon size=\"16px\" stroke={theme.neutral2} />\r\n      </ContractsDropdownRowContainer>\r\n    </StyledExternalLink>\r\n  )\r\n}\r\n\r\nconst ContractsModalContainer = css`\r\n  ${ActionMenuFlyoutStyle}\r\n  min-width: 235px;\r\n  border-radius: 16px;\r\n  ${EllipsisStyle}\r\n`\r\n\r\nconst PoolDetailsHeaderActions = ({\r\n  chainId,\r\n  poolAddress,\r\n  poolName,\r\n  token0,\r\n  token1,\r\n}: {\r\n  chainId?: number\r\n  poolAddress?: string\r\n  poolName: string\r\n  token0?: Token\r\n  token1?: Token\r\n}) => {\r\n  const theme = useTheme()\r\n\r\n  const [contractsModalIsOpen, toggleContractsModal] = useReducer((s) => !s, false)\r\n  const contractsRef = useRef<HTMLDivElement>(null)\r\n  useOnClickOutside(contractsRef, contractsModalIsOpen ? toggleContractsModal : undefined)\r\n\r\n  return (\r\n    <Row width=\"max-content\" justify=\"flex-end\" gap=\"sm\">\r\n      <div style={{ position: 'relative' }} ref={contractsRef}>\r\n        <DropdownSelector\r\n          isOpen={contractsModalIsOpen}\r\n          toggleOpen={toggleContractsModal}\r\n          menuLabel={\r\n            chainId === ChainId.MAINNET ? (\r\n              <EtherscanLogo width=\"18px\" height=\"18px\" fill={theme.neutral1} />\r\n            ) : (\r\n              <ExplorerIcon width=\"18px\" height=\"18px\" fill={theme.neutral1} />\r\n            )\r\n          }\r\n          internalMenuItems={\r\n            <>\r\n              <ContractsDropdownRow address={poolAddress} chainId={chainId} tokens={[token0, token1]} />\r\n              <ContractsDropdownRow address={token0?.address} chainId={chainId} tokens={[token0]} />\r\n              <ContractsDropdownRow address={token1?.address} chainId={chainId} tokens={[token1]} />\r\n            </>\r\n          }\r\n          tooltipText={t`Explorers`}\r\n          hideChevron\r\n          buttonCss={ActionButtonStyle}\r\n          menuFlyoutCss={ContractsModalContainer}\r\n        />\r\n      </div>\r\n      <ShareButton name={poolName} />\r\n    </Row>\r\n  )\r\n}\r\n\r\nconst StyledLink = styled(Link)`\r\n  color: ${({ theme }) => theme.neutral1};\r\n  text-decoration: none;\r\n  ${ClickableStyle}\r\n`\r\n\r\ninterface PoolDetailsHeaderProps {\r\n  chainId?: number\r\n  poolAddress?: string\r\n  token0?: Token\r\n  token1?: Token\r\n  feeTier?: number\r\n  protocolVersion?: ProtocolVersion\r\n  toggleReversed: React.DispatchWithoutAction\r\n  loading?: boolean\r\n}\r\n\r\nexport function PoolDetailsHeader({\r\n  chainId,\r\n  poolAddress,\r\n  token0,\r\n  token1,\r\n  feeTier,\r\n  protocolVersion,\r\n  toggleReversed,\r\n  loading,\r\n}: PoolDetailsHeaderProps) {\r\n  const screenSize = useScreenSize()\r\n  const shouldColumnBreak = !screenSize['sm']\r\n  const poolName = `${token0?.symbol} / ${token1?.symbol}`\r\n  const currencies = useMemo(\r\n    () => (token0 && token1 ? [gqlToCurrency(token0), gqlToCurrency(token1)] : []),\r\n    [token0, token1]\r\n  )\r\n\r\n  if (loading) {\r\n    return (\r\n      <HeaderContainer data-testid=\"pdp-header-loading-skeleton\">\r\n        {shouldColumnBreak ? (\r\n          <Column gap=\"sm\" style={{ width: '100%' }}>\r\n            <IconBubble />\r\n            <DetailBubble $height={40} $width={137} />\r\n          </Column>\r\n        ) : (\r\n          <Row gap=\"sm\">\r\n            <IconBubble />\r\n            <DetailBubble $height={40} $width={137} />\r\n          </Row>\r\n        )}\r\n      </HeaderContainer>\r\n    )\r\n  }\r\n  return (\r\n    <HeaderContainer>\r\n      {shouldColumnBreak ? (\r\n        <Column gap=\"sm\" style={{ width: '100%' }}>\r\n          <Row gap=\"md\" justify=\"space-between\">\r\n            {chainId && (\r\n              <DoubleCurrencyAndChainLogo data-testid=\"double-token-logo\" chainId={chainId} currencies={currencies} />\r\n            )}\r\n            <PoolDetailsHeaderActions\r\n              chainId={chainId}\r\n              poolAddress={poolAddress}\r\n              poolName={poolName}\r\n              token0={token0}\r\n              token1={token1}\r\n            />\r\n          </Row>\r\n          <PoolDetailsTitle\r\n            token0={token0}\r\n            token1={token1}\r\n            chainId={chainId}\r\n            feeTier={feeTier}\r\n            protocolVersion={protocolVersion}\r\n            toggleReversed={toggleReversed}\r\n          />\r\n        </Column>\r\n      ) : (\r\n        <>\r\n          <Row gap=\"md\">\r\n            {chainId && (\r\n              <DoubleCurrencyAndChainLogo data-testid=\"double-token-logo\" chainId={chainId} currencies={currencies} />\r\n            )}\r\n            <PoolDetailsTitle\r\n              token0={token0}\r\n              token1={token1}\r\n              chainId={chainId}\r\n              feeTier={feeTier}\r\n              protocolVersion={protocolVersion}\r\n              toggleReversed={toggleReversed}\r\n            />\r\n          </Row>\r\n          <PoolDetailsHeaderActions\r\n            chainId={chainId}\r\n            poolAddress={poolAddress}\r\n            poolName={poolName}\r\n            token0={token0}\r\n            token1={token1}\r\n          />\r\n        </>\r\n      )}\r\n    </HeaderContainer>\r\n  )\r\n}\r\n","import { ChainId } from '@uniswap/sdk-core'\r\nimport { EtherscanLogo } from 'components/Icons/Etherscan'\r\nimport { ExplorerIcon } from 'components/Icons/ExplorerIcon'\r\nimport CurrencyLogo from 'components/Logo/CurrencyLogo'\r\nimport Row from 'components/Row'\r\nimport Tooltip, { TooltipSize } from 'components/Tooltip'\r\nimport { getTokenDetailsURL, gqlToCurrency } from 'graphql/data/util'\r\nimport useCopyClipboard from 'hooks/useCopyClipboard'\r\nimport { Trans, t } from 'i18n'\r\nimport { useCallback, useState } from 'react'\r\nimport { ChevronRight, Copy } from 'react-feather'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport styled, { useTheme } from 'styled-components'\r\nimport { BREAKPOINTS } from 'theme'\r\nimport { ClickableStyle, EllipsisStyle, ExternalLink, ThemedText } from 'theme/components'\r\nimport { Token } from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\nimport { isAddress, shortenAddress } from 'utilities/src/addresses'\r\nimport { ExplorerDataType, getExplorerLink } from 'utils/getExplorerLink'\r\n\r\nimport { DoubleCurrencyAndChainLogo } from 'components/DoubleLogo'\r\nimport { SupportedInterfaceChainId, chainIdToBackendChain } from 'constants/chains'\r\nimport { NATIVE_CHAIN_ID } from 'constants/tokens'\r\nimport { DetailBubble, SmallDetailBubble } from './shared'\r\n\r\nconst TokenName = styled(ThemedText.BodyPrimary)`\r\n  display: none;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) and (min-width: ${BREAKPOINTS.xs}px) {\r\n    display: block;\r\n  }\r\n  ${EllipsisStyle}\r\n`\r\n\r\nconst TokenTextWrapper = styled(Row)<{ isClickable?: boolean }>`\r\n  gap: 8px;\r\n  margin-right: 12px;\r\n  ${EllipsisStyle}\r\n  ${({ isClickable }) => isClickable && ClickableStyle}\r\n`\r\n\r\nconst SymbolText = styled(ThemedText.BodyPrimary)`\r\n  flex-shrink: 0;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) and (min-width: ${BREAKPOINTS.xs}px) {\r\n    color: ${({ theme }) => theme.neutral2};\r\n  }\r\n`\r\n\r\nconst CopyAddress = styled(Row)`\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  border-radius: 20px;\r\n  background-color: ${({ theme }) => theme.surface3};\r\n  font-size: 14px;\r\n  font-weight: 535;\r\n  line-height: 16px;\r\n  width: max-content;\r\n  flex-shrink: 0;\r\n  ${ClickableStyle}\r\n`\r\nconst StyledCopyIcon = styled(Copy)`\r\n  width: 16px;\r\n  height: 16px;\r\n  color: ${({ theme }) => theme.neutral2};\r\n  flex-shrink: 0;\r\n`\r\n\r\nconst ExplorerWrapper = styled.div`\r\n  padding: 8px;\r\n  border-radius: 20px;\r\n  background-color: ${({ theme }) => theme.surface3};\r\n  display: flex;\r\n  ${ClickableStyle}\r\n`\r\n\r\nconst ButtonsRow = styled(Row)`\r\n  gap: 8px;\r\n  flex-shrink: 0;\r\n  width: max-content;\r\n`\r\n\r\ninterface PoolDetailsLinkProps {\r\n  address?: string\r\n  chainId?: SupportedInterfaceChainId\r\n  tokens: (Token | undefined)[]\r\n  loading?: boolean\r\n}\r\n\r\nexport function PoolDetailsLink({ address, chainId, tokens, loading }: PoolDetailsLinkProps) {\r\n  const theme = useTheme()\r\n  const isNative = address === NATIVE_CHAIN_ID\r\n  const currency = tokens[0] && gqlToCurrency(tokens[0])\r\n  const [isCopied, setCopied] = useCopyClipboard()\r\n  const copy = useCallback(() => {\r\n    const checksummedAddress = isAddress(address)\r\n    checksummedAddress && setCopied(checksummedAddress)\r\n  }, [address, setCopied])\r\n\r\n  const isPool = tokens.length === 2\r\n  const currencies = isPool && tokens[1] ? [currency, gqlToCurrency(tokens[1])] : [currency]\r\n  const explorerUrl =\r\n    address &&\r\n    chainId &&\r\n    getExplorerLink(\r\n      chainId,\r\n      address,\r\n      isNative ? ExplorerDataType.NATIVE : isPool ? ExplorerDataType.ADDRESS : ExplorerDataType.TOKEN\r\n    )\r\n\r\n  const navigate = useNavigate()\r\n  const chainName = chainIdToBackendChain({ chainId, withFallback: true })\r\n  const handleTokenTextClick = useCallback(() => {\r\n    if (!isPool) {\r\n      navigate(getTokenDetailsURL({ address: tokens[0]?.address, chain: chainName }))\r\n    }\r\n  }, [navigate, tokens, isPool, chainName])\r\n\r\n  const [truncateAddress, setTruncateAddress] = useState<false | 'start' | 'both'>(false)\r\n  const onTextRender = useCallback(\r\n    (textRef: HTMLElement) => {\r\n      if (textRef) {\r\n        const hasOverflow = textRef.clientWidth < textRef.scrollWidth\r\n        if (hasOverflow) {\r\n          setTruncateAddress((prev) => (prev ? 'both' : 'start'))\r\n        }\r\n      }\r\n    },\r\n    // This callback must run after it sets truncateAddress to 'start' to see if it needs to 'both'.\r\n    // It checks if the textRef has overflow, and sets truncateAddress accordingly to avoid it.\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [truncateAddress]\r\n  )\r\n\r\n  if (loading || !address || !chainId) {\r\n    return (\r\n      <Row gap=\"8px\" padding=\"6px 0px\">\r\n        <SmallDetailBubble />\r\n        <DetailBubble $width={117} />\r\n      </Row>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Row align=\"space-between\">\r\n      <TokenTextWrapper\r\n        data-testid={\r\n          isPool ? `pdp-pool-logo-${tokens[0]?.symbol}-${tokens[1]?.symbol}` : `pdp-token-logo-${tokens[0]?.symbol}`\r\n        }\r\n        isClickable={!isPool}\r\n        onClick={handleTokenTextClick}\r\n        ref={onTextRender}\r\n      >\r\n        {isPool ? (\r\n          <DoubleCurrencyAndChainLogo chainId={chainId} currencies={currencies} size={20} />\r\n        ) : (\r\n          <CurrencyLogo currency={currency} size={20} />\r\n        )}\r\n        <TokenName>{isPool ? <Trans>Pool</Trans> : tokens[0]?.name}</TokenName>\r\n        <SymbolText>\r\n          {isPool ? (\r\n            `${tokens[0]?.symbol} / ${tokens[1]?.symbol}`\r\n          ) : (\r\n            <Row gap=\"4px\">\r\n              {tokens[0]?.symbol} <ChevronRight size={16} color={theme.neutral2} />\r\n            </Row>\r\n          )}\r\n        </SymbolText>\r\n      </TokenTextWrapper>\r\n      <ButtonsRow>\r\n        {!isNative && (\r\n          <Tooltip placement=\"bottom\" size={TooltipSize.Max} show={isCopied} text={t`Copied`}>\r\n            <CopyAddress data-testid={`copy-address-${address}`} onClick={copy}>\r\n              {shortenAddress(address, truncateAddress ? 2 : undefined, truncateAddress === 'both' ? 2 : undefined)}\r\n              <StyledCopyIcon />\r\n            </CopyAddress>\r\n          </Tooltip>\r\n        )}\r\n        {explorerUrl && (\r\n          <ExternalLink href={explorerUrl} data-testid={`explorer-url-${explorerUrl}`}>\r\n            <ExplorerWrapper>\r\n              {chainId === ChainId.MAINNET ? (\r\n                <EtherscanLogo width=\"16px\" height=\"16px\" fill={theme.neutral1} />\r\n              ) : (\r\n                <ExplorerIcon width=\"16px\" height=\"16px\" fill={theme.neutral1} />\r\n              )}\r\n            </ExplorerWrapper>\r\n          </ExternalLink>\r\n        )}\r\n      </ButtonsRow>\r\n    </Row>\r\n  )\r\n}\r\n","import { Currency } from '@uniswap/sdk-core'\r\nimport Column from 'components/Column'\r\nimport CurrencyLogo from 'components/Logo/CurrencyLogo'\r\nimport Row from 'components/Row'\r\nimport { DeltaArrow } from 'components/Tokens/TokenDetails/Delta'\r\nimport { LoadingBubble } from 'components/Tokens/loading'\r\nimport { getTokenDetailsURL, unwrapToken } from 'graphql/data/util'\r\nimport { useCurrency } from 'hooks/Tokens'\r\nimport { useScreenSize } from 'hooks/screenSize'\r\nimport { Trans } from 'i18n'\r\nimport { ReactNode, useMemo } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Text } from 'rebass'\r\nimport styled, { css, useTheme } from 'styled-components'\r\nimport { BREAKPOINTS } from 'theme'\r\nimport { ClickableStyle, ThemedText } from 'theme/components'\r\nimport { Token } from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\nimport { NumberType, useFormatter } from 'utils/formatNumbers'\r\n\r\nimport { SupportedInterfaceChainId, chainIdToBackendChain } from 'constants/chains'\r\nimport { NATIVE_CHAIN_ID, nativeOnChain } from 'constants/tokens'\r\nimport { PoolData } from 'graphql/data/pools/usePoolData'\r\nimport { DetailBubble } from './shared'\r\n\r\nconst HeaderText = styled(Text)`\r\n  font-weight: 485;\r\n  font-size: 24px;\r\n  line-height: 36px;\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nconst StatsWrapper = styled(Column)<{ loaded?: boolean }>`\r\n  gap: 24px;\r\n  padding: 20px;\r\n  border-radius: 20px;\r\n  background: ${({ theme }) => theme.surface2};\r\n  width: 100%;\r\n  z-index: 1;\r\n  margin-top: ${({ loaded }) => loaded && '-24px'};\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    flex-direction: row;\r\n    background: transparent;\r\n    flex-wrap: wrap;\r\n    padding: 20px 0px;\r\n    justify-content: space-between;\r\n    margin-top: 0px;\r\n  }\r\n`\r\n\r\nconst StatItemColumn = styled(Column)`\r\n  gap: 8px;\r\n  flex: 1;\r\n  min-width: 180px;\r\n\r\n  @media (max-width: ${BREAKPOINTS.sm}px) {\r\n    min-width: 150px;\r\n  }\r\n`\r\n\r\nconst PoolBalanceSymbols = styled(Row)`\r\n  justify-content: space-between;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    flex-direction: column;\r\n  }\r\n`\r\n\r\nconst PoolBalanceTokenNamesContainer = styled(Row)`\r\n  font-weight: 485;\r\n  font-size: 16px;\r\n  line-height: 24px;\r\n  width: max-content;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    font-size: 20px;\r\n    line-height: 28px;\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nconst StyledLink = styled(Link)`\r\n  display: flex;\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.neutral1};\r\n  ${ClickableStyle}\r\n`\r\n\r\nconst leftBarChartStyles = css`\r\n  border-top-left-radius: 5px;\r\n  border-bottom-left-radius: 5px;\r\n  border-right: 1px solid ${({ theme }) => theme.surface2};\r\n`\r\n\r\nconst rightBarChartStyles = css`\r\n  border-top-right-radius: 5px;\r\n  border-bottom-right-radius: 5px;\r\n  border-left: 1px solid ${({ theme }) => theme.surface2};\r\n`\r\n\r\nconst BalanceChartSide = styled.div<{ percent: number; $color: string; isLeft: boolean }>`\r\n  height: 8px;\r\n  width: ${({ percent }) => percent * 100}%;\r\n  background: ${({ $color }) => $color};\r\n  ${({ isLeft }) => (isLeft ? leftBarChartStyles : rightBarChartStyles)}\r\n`\r\n\r\nconst StatSectionBubble = styled(LoadingBubble)`\r\n  width: 180px;\r\n  height: 40px;\r\n`\r\n\r\nconst StatHeaderBubble = styled(LoadingBubble)`\r\n  width: 116px;\r\n  height: 24px;\r\n  border-radius: 8px;\r\n`\r\n\r\ntype TokenFullData = Token & {\r\n  price: number\r\n  tvl: number\r\n  percent: number\r\n  currency?: Currency\r\n}\r\n\r\nconst PoolBalanceTokenNames = ({ token, chainId }: { token: TokenFullData; chainId?: SupportedInterfaceChainId }) => {\r\n  const isScreenSize = useScreenSize()\r\n  const screenIsNotLarge = isScreenSize['lg']\r\n  const { formatNumber } = useFormatter()\r\n  const unwrappedToken = chainId ? unwrapToken(chainId, token) : token\r\n  const isNative = unwrappedToken?.address === NATIVE_CHAIN_ID\r\n  const currency = isNative && chainId ? nativeOnChain(chainId) : token.currency\r\n  return (\r\n    <PoolBalanceTokenNamesContainer>\r\n      {!screenIsNotLarge && <CurrencyLogo currency={currency} size={20} style={{ marginRight: '8px' }} />}\r\n      {formatNumber({\r\n        input: token.tvl,\r\n        type: NumberType.TokenQuantityStats,\r\n      })}\r\n      &nbsp;\r\n      <StyledLink\r\n        to={getTokenDetailsURL({\r\n          address: unwrappedToken.address,\r\n          chain: chainIdToBackendChain({ chainId, withFallback: true }),\r\n        })}\r\n      >\r\n        {screenIsNotLarge && (\r\n          <CurrencyLogo currency={currency} size={16} style={{ marginRight: '4px', marginLeft: '4px' }} />\r\n        )}\r\n        {unwrappedToken.symbol}\r\n      </StyledLink>\r\n    </PoolBalanceTokenNamesContainer>\r\n  )\r\n}\r\n\r\ninterface PoolDetailsStatsProps {\r\n  poolData?: PoolData\r\n  isReversed?: boolean\r\n  chainId?: number\r\n  loading?: boolean\r\n}\r\n\r\nexport function PoolDetailsStats({ poolData, isReversed, chainId, loading }: PoolDetailsStatsProps) {\r\n  const isScreenSize = useScreenSize()\r\n  const screenIsNotLarge = isScreenSize['lg']\r\n  const theme = useTheme()\r\n\r\n  const currency0 = useCurrency(poolData?.token0?.address, chainId)\r\n  const currency1 = useCurrency(poolData?.token1?.address, chainId)\r\n\r\n  const [token0, token1] = useMemo(() => {\r\n    if (poolData && poolData.tvlToken0 && poolData.token0Price && poolData.tvlToken1 && poolData.token1Price) {\r\n      const fullWidth = poolData?.tvlToken0 * poolData?.token0Price + poolData?.tvlToken1 * poolData?.token1Price\r\n      const token0FullData: TokenFullData = {\r\n        ...poolData?.token0,\r\n        price: poolData?.token0Price,\r\n        tvl: poolData?.tvlToken0,\r\n        percent: (poolData?.tvlToken0 * poolData?.token0Price) / fullWidth,\r\n        currency: currency0,\r\n      }\r\n      const token1FullData: TokenFullData = {\r\n        ...poolData?.token1,\r\n        price: poolData?.token1Price,\r\n        tvl: poolData?.tvlToken1,\r\n        percent: (poolData?.tvlToken1 * poolData?.token1Price) / fullWidth,\r\n        currency: currency1,\r\n      }\r\n      return isReversed ? [token1FullData, token0FullData] : [token0FullData, token1FullData]\r\n    } else {\r\n      return [undefined, undefined]\r\n    }\r\n  }, [currency0, currency1, isReversed, poolData])\r\n\r\n  if (loading || !token0 || !token1 || !poolData) {\r\n    return (\r\n      <StatsWrapper>\r\n        <HeaderText>\r\n          <StatHeaderBubble />\r\n        </HeaderText>\r\n        {Array.from({ length: 4 }).map((_, i) => (\r\n          <Column gap=\"md\" key={`loading-info-row-${i}`}>\r\n            <DetailBubble />\r\n            <StatSectionBubble />\r\n          </Column>\r\n        ))}\r\n      </StatsWrapper>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <StatsWrapper loaded>\r\n      <HeaderText>\r\n        <Trans>Stats</Trans>\r\n      </HeaderText>\r\n      <StatItemColumn>\r\n        <ThemedText.BodySecondary>\r\n          <Trans>Pool balances</Trans>\r\n        </ThemedText.BodySecondary>\r\n        <PoolBalanceSymbols>\r\n          <PoolBalanceTokenNames token={token0} chainId={chainId} />\r\n          <PoolBalanceTokenNames token={token1} chainId={chainId} />\r\n        </PoolBalanceSymbols>\r\n        {screenIsNotLarge && (\r\n          <Row data-testid=\"pool-balance-chart\">\r\n            <BalanceChartSide percent={token0.percent} $color={theme.token0} isLeft={true} />\r\n            <BalanceChartSide percent={token1.percent} $color={theme.token1} isLeft={false} />\r\n          </Row>\r\n        )}\r\n      </StatItemColumn>\r\n      {poolData?.tvlUSD && (\r\n        <StatItem title={<Trans>TVL</Trans>} value={poolData.tvlUSD} delta={poolData.tvlUSDChange} />\r\n      )}\r\n      {poolData?.volumeUSD24H !== undefined && (\r\n        <StatItem title={<Trans>24H volume</Trans>} value={poolData.volumeUSD24H} delta={poolData.volumeUSD24HChange} />\r\n      )}\r\n      {poolData?.volumeUSD24H !== undefined && poolData?.feeTier !== undefined && (\r\n        <StatItem title={<Trans>24H fees</Trans>} value={poolData.volumeUSD24H * (poolData.feeTier / 1000000)} />\r\n      )}\r\n    </StatsWrapper>\r\n  )\r\n}\r\n\r\nconst StatsTextContainer = styled(Row)`\r\n  gap: 4px;\r\n  width: 100%;\r\n  align-items: flex-end;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    flex-direction: column;\r\n    gap: 0px;\r\n    align-items: flex-start;\r\n  }\r\n`\r\n\r\nconst StatItemText = styled(Text)`\r\n  color: ${({ theme }) => theme.neutral1};\r\n  font-size: 36px;\r\n  font-weight: 485;\r\n  line-height: 44px;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    font-size: 20px;\r\n    line-height: 28px;\r\n  }\r\n`\r\n\r\nfunction StatItem({ title, value, delta }: { title: ReactNode; value: number; delta?: number }) {\r\n  const { formatNumber, formatDelta } = useFormatter()\r\n\r\n  return (\r\n    <StatItemColumn>\r\n      <ThemedText.BodySecondary>{title}</ThemedText.BodySecondary>\r\n      <StatsTextContainer>\r\n        <StatItemText>\r\n          {formatNumber({\r\n            input: value,\r\n            type: NumberType.FiatTokenStats,\r\n          })}\r\n        </StatItemText>\r\n        {!!delta && (\r\n          <Row width=\"max-content\" padding=\"4px 0px\">\r\n            <DeltaArrow delta={delta} />\r\n            <ThemedText.BodySecondary>{formatDelta(delta)}</ThemedText.BodySecondary>\r\n          </Row>\r\n        )}\r\n      </StatsTextContainer>\r\n    </StatItemColumn>\r\n  )\r\n}\r\n","import { useWeb3React } from '@web3-react/core'\r\nimport { Scrim } from 'components/AccountDrawer'\r\nimport { PositionInfo } from 'components/AccountDrawer/MiniPortfolio/Pools/cache'\r\nimport useMultiChainPositions from 'components/AccountDrawer/MiniPortfolio/Pools/useMultiChainPositions'\r\nimport Column from 'components/Column'\r\nimport { CurrencySelect } from 'components/CurrencyInputPanel/SwapCurrencyInputPanel'\r\nimport { ReverseArrow } from 'components/Icons/ReverseArrow'\r\nimport Row from 'components/Row'\r\nimport { SwapWrapperOuter } from 'components/swap/styled'\r\nimport { LoadingBubble } from 'components/Tokens/loading'\r\nimport TokenSafetyMessage from 'components/TokenSafety/TokenSafetyMessage'\r\nimport { chainIdToBackendChain, SupportedInterfaceChainId } from 'constants/chains'\r\nimport { getPriorityWarning, StrongWarning, useTokenWarning } from 'constants/tokenSafety'\r\nimport { useTokenBalancesQuery } from 'graphql/data/apollo/TokenBalancesProvider'\r\nimport { gqlToCurrency } from 'graphql/data/util'\r\nimport { useScreenSize } from 'hooks/screenSize'\r\nimport { useSwitchChain } from 'hooks/useSwitchChain'\r\nimport { Trans } from 'i18n'\r\nimport { Swap } from 'pages/Swap'\r\nimport { useMemo, useReducer } from 'react'\r\nimport { Plus, X } from 'react-feather'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { BREAKPOINTS } from 'theme'\r\nimport { ClickableStyle, ThemedText } from 'theme/components'\r\nimport { opacify } from 'theme/utils'\r\nimport { Z_INDEX } from 'theme/zIndex'\r\nimport { Token } from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\nimport { currencyId } from 'utils/currencyId'\r\nimport { NumberType, useFormatter } from 'utils/formatNumbers'\r\n\r\nconst PoolDetailsStatsButtonsRow = styled(Row)`\r\n  gap: 12px;\r\n  z-index: 1;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    gap: 8px;\r\n    position: fixed;\r\n    bottom: 0px;\r\n    left: 0;\r\n    margin: 8px;\r\n    width: calc(100% - 16px);\r\n    background: ${({ theme }) => theme.surface1};\r\n    padding: 12px 32px;\r\n    border: 1px solid ${({ theme }) => theme.surface3};\r\n    border-radius: 20px;\r\n    backdrop-filter: blur(10px);\r\n    & > :first-child {\r\n      margin-right: auto;\r\n    }\r\n    z-index: ${Z_INDEX.sticky};\r\n  }\r\n  @media (max-width: ${BREAKPOINTS.md}px) {\r\n    bottom: 56px;\r\n  }\r\n`\r\n\r\nconst PoolButton = styled.button<{ $open?: boolean; $hideOnMobile?: boolean; $fixedWidth?: boolean }>`\r\n  display: flex;\r\n  flex-direction: row;\r\n  padding: 12px 16px 12px 12px;\r\n  border: unset;\r\n  border-radius: 900px;\r\n  width: ${({ $open }) => ($open ? '100px' : '50%')};\r\n  gap: 8px;\r\n  color: ${({ theme, $open }) => ($open ? theme.neutral1 : theme.accent1)};\r\n  background-color: ${({ theme, $open }) => ($open ? theme.surface1 : opacify(12, theme.accent1))};\r\n  justify-content: center;\r\n  transition: ${({ theme }) => `width ${theme.transition.duration.medium} ${theme.transition.timing.inOut}`};\r\n  border: ${({ theme, $open }) => $open && `1px solid ${theme.surface3}`};\r\n  ${ClickableStyle}\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    width: ${({ $fixedWidth }) => $fixedWidth && '120px'};\r\n  }\r\n  @media (max-width: ${BREAKPOINTS.sm}px) {\r\n    display: ${({ $hideOnMobile }) => $hideOnMobile && 'none'};\r\n    width: ${({ $fixedWidth }) => !$fixedWidth && '100%'};\r\n  }\r\n`\r\n\r\nconst SwapIcon = styled(ReverseArrow)`\r\n  fill: ${({ theme }) => theme.accent1};\r\n  rotate: 90deg;\r\n`\r\n\r\nconst ButtonBubble = styled(LoadingBubble)`\r\n  height: 44px;\r\n  width: 175px;\r\n  border-radius: 900px;\r\n`\r\n\r\nconst SwapModalWrapper = styled(Column)<{ open?: boolean }>`\r\n  z-index: 0;\r\n  gap: 24px;\r\n  visibility: ${({ open }) => (open ? 'visible' : 'hidden')};\r\n  opacity: ${({ open }) => (open ? '1' : '0')};\r\n  max-height: ${({ open }) => (open ? '100vh' : '0')};\r\n  transition: ${({ theme }) => `max-height ${theme.transition.duration.medium} ${theme.transition.timing.ease}`};\r\n  padding-bottom: ${({ open }) => (open ? '24px' : '0')};\r\n\r\n  ${SwapWrapperOuter} {\r\n    &:before {\r\n      background-color: unset;\r\n    }\r\n  }\r\n\r\n  // Need to override the default visibility to properly hide\r\n  ${CurrencySelect} {\r\n    visibility: ${({ open }) => (open ? 'visible' : 'hidden')};\r\n  }\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    position: fixed;\r\n    width: calc(100% - 16px);\r\n    padding: 0px 12px 12px;\r\n    border-radius: 24px;\r\n    max-width: 480px;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    z-index: ${Z_INDEX.fixed};\r\n    background: ${({ theme }) => theme.surface1};\r\n    transition: ${({ theme }) => `opacity ${theme.transition.duration.medium} ${theme.transition.timing.ease}`};\r\n  }\r\n`\r\n\r\nconst MobileBalance = styled(Column)`\r\n  gap: 2px;\r\n  display: none;\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    display: flex;\r\n  }\r\n`\r\n\r\ninterface PoolDetailsStatsButtonsProps {\r\n  chainId?: SupportedInterfaceChainId\r\n  token0?: Token\r\n  token1?: Token\r\n  feeTier?: number\r\n  loading?: boolean\r\n}\r\n\r\nfunction findMatchingPosition(positions: PositionInfo[], token0?: Token, token1?: Token, feeTier?: number) {\r\n  return positions?.find(\r\n    (position) =>\r\n      (position?.details.token0.toLowerCase() === token0?.address ||\r\n        position?.details.token0.toLowerCase() === token1?.address) &&\r\n      (position?.details.token1.toLowerCase() === token0?.address ||\r\n        position?.details.token1.toLowerCase() === token1?.address) &&\r\n      position?.details.fee == feeTier &&\r\n      !position.closed\r\n  )\r\n}\r\n\r\nexport function PoolDetailsStatsButtons({ chainId, token0, token1, feeTier, loading }: PoolDetailsStatsButtonsProps) {\r\n  const { chainId: walletChainId, account } = useWeb3React()\r\n  const { positions: userOwnedPositions } = useMultiChainPositions(account ?? '', chainId ? [chainId] : undefined)\r\n  const position = userOwnedPositions && findMatchingPosition(userOwnedPositions, token0, token1, feeTier)\r\n  const tokenId = position?.details.tokenId\r\n  const switchChain = useSwitchChain()\r\n  const navigate = useNavigate()\r\n  const currency0 = token0 && gqlToCurrency(token0)\r\n  const currency1 = token1 && gqlToCurrency(token1)\r\n\r\n  // Mobile Balance Data\r\n  const { data: balanceQuery } = useTokenBalancesQuery()\r\n  const { balance0, balance1, balance0Fiat, balance1Fiat } = useMemo(() => {\r\n    const filteredBalances = balanceQuery?.portfolios?.[0]?.tokenBalances?.filter(\r\n      (tokenBalance) => tokenBalance?.token?.chain === chainIdToBackendChain({ chainId, withFallback: true })\r\n    )\r\n    const tokenBalance0 = filteredBalances?.find((tokenBalance) => tokenBalance?.token?.address === token0?.address)\r\n    const tokenBalance1 = filteredBalances?.find((tokenBalance) => tokenBalance?.token?.address === token1?.address)\r\n    return {\r\n      balance0: tokenBalance0?.quantity ?? 0,\r\n      balance1: tokenBalance1?.quantity ?? 0,\r\n      balance0Fiat: tokenBalance0?.denominatedValue?.value ?? 0,\r\n      balance1Fiat: tokenBalance1?.denominatedValue?.value ?? 0,\r\n    }\r\n  }, [balanceQuery?.portfolios, chainId, token0?.address, token1?.address])\r\n  const { formatNumber } = useFormatter()\r\n  const formattedBalance0 = formatNumber({\r\n    input: balance0,\r\n    type: NumberType.TokenNonTx,\r\n  })\r\n  const formattedBalance1 = formatNumber({\r\n    input: balance1,\r\n    type: NumberType.TokenNonTx,\r\n  })\r\n  const totalFiatValue = balance0Fiat + balance1Fiat\r\n  const formattedFiatValue = formatNumber({\r\n    input: totalFiatValue,\r\n    type: NumberType.PortfolioBalance,\r\n  })\r\n\r\n  const handleAddLiquidity = async () => {\r\n    if (currency0 && currency1) {\r\n      if (walletChainId !== chainId && chainId) await switchChain(chainId)\r\n      navigate(`/add/${currencyId(currency0)}/${currencyId(currency1)}/${feeTier}${tokenId ? `/${tokenId}` : ''}`)\r\n    }\r\n  }\r\n  const [swapModalOpen, toggleSwapModalOpen] = useReducer((state) => !state, false)\r\n  const isScreenSize = useScreenSize()\r\n  const screenSizeLargerThanTablet = isScreenSize['lg']\r\n  const isMobile = !isScreenSize['sm']\r\n  const token0Warning = useTokenWarning(token0?.address, chainId)\r\n  const token1Warning = useTokenWarning(token1?.address, chainId)\r\n  const priorityWarning = getPriorityWarning(token0Warning, token1Warning)\r\n\r\n  if (loading || !currency0 || !currency1)\r\n    return (\r\n      <PoolDetailsStatsButtonsRow data-testid=\"pdp-buttons-loading-skeleton\">\r\n        <MobileBalance>\r\n          <ButtonBubble />\r\n        </MobileBalance>\r\n        <ButtonBubble />\r\n        <ButtonBubble />\r\n      </PoolDetailsStatsButtonsRow>\r\n    )\r\n\r\n  return (\r\n    <Column gap=\"lg\">\r\n      <PoolDetailsStatsButtonsRow>\r\n        {account && (\r\n          <MobileBalance>\r\n            <ThemedText.SubHeaderSmall>\r\n              <Trans>Your balances</Trans>\r\n            </ThemedText.SubHeaderSmall>\r\n            <Row gap=\"8px\">\r\n              <ThemedText.HeadlineSmall>\r\n                {formattedBalance0} {currency0.symbol}\r\n              </ThemedText.HeadlineSmall>\r\n              <ThemedText.HeadlineSmall color=\"neutral3\">|</ThemedText.HeadlineSmall>\r\n              <ThemedText.HeadlineSmall>\r\n                {formattedBalance1} {currency1.symbol}\r\n              </ThemedText.HeadlineSmall>\r\n              {Boolean(totalFiatValue) && !isMobile && <ThemedText.Caption>({formattedFiatValue})</ThemedText.Caption>}\r\n            </Row>\r\n          </MobileBalance>\r\n        )}\r\n        <PoolButton\r\n          onClick={toggleSwapModalOpen}\r\n          $open={swapModalOpen}\r\n          $fixedWidth={Boolean(account)}\r\n          data-testid={`pool-details-${swapModalOpen ? 'close' : 'swap'}-button`}\r\n        >\r\n          {swapModalOpen ? (\r\n            <>\r\n              {screenSizeLargerThanTablet && <X size={20} />}\r\n              <ThemedText.BodyPrimary fontWeight={535} color=\"accentActive\">\r\n                <Trans>Close</Trans>\r\n              </ThemedText.BodyPrimary>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {screenSizeLargerThanTablet && <SwapIcon />}\r\n              <ThemedText.BodyPrimary fontWeight={535} color=\"accentActive\">\r\n                <Trans>Swap</Trans>\r\n              </ThemedText.BodyPrimary>\r\n            </>\r\n          )}\r\n        </PoolButton>\r\n        <PoolButton\r\n          onClick={handleAddLiquidity}\r\n          data-testid=\"pool-details-add-liquidity-button\"\r\n          $fixedWidth={Boolean(account)}\r\n          $hideOnMobile\r\n        >\r\n          {screenSizeLargerThanTablet && <Plus size={20} />}\r\n          <ThemedText.BodyPrimary fontWeight={535} color=\"accentActive\">\r\n            <Trans>Add liquidity</Trans>\r\n          </ThemedText.BodyPrimary>\r\n        </PoolButton>\r\n      </PoolDetailsStatsButtonsRow>\r\n      <SwapModalWrapper open={swapModalOpen} data-testid=\"pool-details-swap-modal\">\r\n        <Swap\r\n          syncTabToUrl={false}\r\n          chainId={chainId}\r\n          initialInputCurrency={currency0}\r\n          initialOutputCurrency={currency1}\r\n          compact\r\n          disableTokenInputs={chainId !== walletChainId}\r\n        />\r\n        {Boolean(priorityWarning) && (\r\n          <TokenSafetyMessage\r\n            tokenAddress={(priorityWarning === token0Warning ? token0?.address : token1?.address) ?? ''}\r\n            warning={priorityWarning ?? StrongWarning}\r\n            plural={Boolean(token0Warning && token1Warning)}\r\n            tokenSymbol={priorityWarning === token0Warning ? token0?.symbol : token1?.symbol}\r\n          />\r\n        )}\r\n      </SwapModalWrapper>\r\n      <Scrim\r\n        $open={swapModalOpen && !screenSizeLargerThanTablet}\r\n        $maxWidth={BREAKPOINTS.lg}\r\n        $zIndex={Z_INDEX.sticky}\r\n        onClick={toggleSwapModalOpen}\r\n      />\r\n    </Column>\r\n  )\r\n}\r\n","type SVGProps = React.SVGProps<SVGSVGElement> & {\r\n  fill?: string\r\n  height?: string | number\r\n  width?: string | number\r\n  gradientId?: string\r\n}\r\n\r\nexport const ClosedCircle = (props: SVGProps) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" {...props}>\r\n    <g clipPath=\"url(#clip0_2958_135280)\">\r\n      <path\r\n        d=\"M6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11Z\"\r\n        stroke=\"#9B9B9B\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n      <path d=\"M2.46484 2.46509L9.53484 9.53509\" stroke=\"#9B9B9B\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n    </g>\r\n    <defs>\r\n      <clipPath id=\"clip0_2958_135280\">\r\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\r\n      </clipPath>\r\n    </defs>\r\n  </svg>\r\n)\r\n\r\nexport const DoubleArrow = (props: SVGProps) => (\r\n  <svg width=\"14\" height=\"9\" viewBox=\"0 0 14 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n    <path\r\n      d=\"M4.00284 8.5L0.184659 4.68182L4.00284 0.863636L4.65909 1.51136L1.95739 4.21307H12.1335L9.43182 1.51136L10.0881 0.863636L13.9062 4.68182L10.0881 8.5L9.43182 7.84375L12.1335 5.15057H1.95739L4.65909 7.84375L4.00284 8.5Z\"\r\n      fill=\"#5E5E5E\"\r\n    />\r\n  </svg>\r\n)\r\n","import { useWeb3React } from '@web3-react/core'\r\nimport { PositionInfo } from 'components/AccountDrawer/MiniPortfolio/Pools/cache'\r\nimport Column from 'components/Column'\r\nimport { DoubleCurrencyLogo } from 'components/DoubleLogo'\r\nimport { ClosedCircle, DoubleArrow } from 'components/Pools/PoolDetails/icons'\r\nimport Row from 'components/Row'\r\nimport { BIPS_BASE } from 'constants/misc'\r\nimport { useCurrency } from 'hooks/Tokens'\r\nimport { useSwitchChain } from 'hooks/useSwitchChain'\r\nimport { Trans } from 'i18n'\r\nimport { useCallback } from 'react'\r\nimport { AlertTriangle } from 'react-feather'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { Bound } from 'state/mint/v3/actions'\r\nimport styled, { useTheme } from 'styled-components'\r\nimport { BREAKPOINTS } from 'theme'\r\nimport { ClickableStyle, ThemedText } from 'theme/components'\r\nimport { useFormatter } from 'utils/formatNumbers'\r\n\r\nconst PositionTableWrapper = styled(Column)`\r\n  gap: 24px;\r\n  margin-top: 24px;\r\n  width: 100%;\r\n`\r\n\r\nconst PositionWrapper = styled(Column)`\r\n  gap: 4px;\r\n  background: ${({ theme }) => theme.surface2};\r\n  border-radius: 12px;\r\n  width: 100%;\r\n  ${ClickableStyle}\r\n  padding: 16px;\r\n`\r\n\r\nconst FeeTier = styled(ThemedText.LabelMicro)`\r\n  padding: 4px 6px;\r\n  background: ${({ theme }) => theme.surface2};\r\n`\r\n\r\nconst StatusWrapper = styled(Row)<{ status: PositionStatus }>`\r\n  gap: 8px;\r\n  width: max-content;\r\n  margin-right: 0;\r\n  margin-left: auto;\r\n  color: ${({ theme, status }) =>\r\n    status === PositionStatus.IN_RANGE\r\n      ? theme.success\r\n      : status === PositionStatus.OUT_OF_RANGE\r\n      ? theme.deprecated_accentWarning\r\n      : theme.neutral2};\r\n`\r\n\r\nconst RangeWrapper = styled(Row)`\r\n  gap: 10px;\r\n\r\n  @media screen and (max-width: ${BREAKPOINTS.sm}px) {\r\n    flex-direction: column;\r\n    gap: 4px;\r\n    align-items: flex-start;\r\n  }\r\n`\r\n\r\nconst StyledDoubleArrow = styled(DoubleArrow)`\r\n  @media screen and (max-width: ${BREAKPOINTS.sm}px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst RangeText = styled(ThemedText.Caption)`\r\n  width: max-content;\r\n  white-space: nowrap;\r\n`\r\n\r\nconst StyledDot = styled.div`\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background-color: ${({ theme }) => theme.success};\r\n`\r\n\r\nenum PositionStatus {\r\n  IN_RANGE = 'In range',\r\n  OUT_OF_RANGE = 'Out of range',\r\n  CLOSED = 'Closed',\r\n}\r\n\r\nfunction PositionRow({ positionInfo }: { positionInfo: PositionInfo }) {\r\n  const tokens = [\r\n    useCurrency(positionInfo.details.token0, positionInfo.chainId),\r\n    useCurrency(positionInfo.details.token1, positionInfo.chainId),\r\n  ]\r\n  const { chainId: walletChainId } = useWeb3React()\r\n  const navigate = useNavigate()\r\n  const switchChain = useSwitchChain()\r\n  const theme = useTheme()\r\n  const { formatTickPrice } = useFormatter()\r\n\r\n  const onClick = useCallback(async () => {\r\n    if (walletChainId !== positionInfo.chainId) await switchChain(positionInfo.chainId)\r\n    navigate('/pool/' + positionInfo.details.tokenId)\r\n  }, [navigate, positionInfo.chainId, positionInfo.details.tokenId, switchChain, walletChainId])\r\n\r\n  const status = positionInfo.inRange\r\n    ? PositionStatus.IN_RANGE\r\n    : positionInfo.closed\r\n    ? PositionStatus.CLOSED\r\n    : PositionStatus.OUT_OF_RANGE\r\n\r\n  const priceUpper = positionInfo.position.token0PriceLower.invert()\r\n  const priceLower = positionInfo.position.token0PriceUpper.invert()\r\n\r\n  const ticksAtLimit = {\r\n    LOWER: parseFloat(priceLower.toFixed(0)) === 0,\r\n    UPPER: parseFloat(priceUpper.toFixed(0)) > Number.MAX_SAFE_INTEGER,\r\n  }\r\n\r\n  return (\r\n    <PositionWrapper onClick={onClick}>\r\n      <Row gap=\"8px\">\r\n        <DoubleCurrencyLogo currencies={tokens} size={16} />\r\n        <ThemedText.SubHeader>\r\n          {positionInfo.pool.token0.symbol}/{positionInfo.pool.token1.symbol}\r\n        </ThemedText.SubHeader>\r\n        <FeeTier>{positionInfo.pool.fee / BIPS_BASE}%</FeeTier>\r\n        <StatusWrapper status={status}>\r\n          <ThemedText.Caption color=\"inherit\">{status}</ThemedText.Caption>\r\n          {status === PositionStatus.IN_RANGE && <StyledDot />}\r\n          {status === PositionStatus.OUT_OF_RANGE && <AlertTriangle size={12} color={theme.deprecated_accentWarning} />}\r\n          {status === PositionStatus.CLOSED && <ClosedCircle />}\r\n        </StatusWrapper>\r\n      </Row>\r\n      <RangeWrapper>\r\n        <RangeText data-testid={`position-min-${priceLower.toFixed(0)}`}>\r\n          <Trans>Min:</Trans>&nbsp;\r\n          {formatTickPrice({\r\n            price: priceLower,\r\n            atLimit: ticksAtLimit,\r\n            direction: Bound.LOWER,\r\n          })}\r\n          &nbsp;\r\n          {positionInfo.pool.token0.symbol}&nbsp;\r\n          <Trans>per</Trans>&nbsp;\r\n          {positionInfo.pool.token1.symbol}\r\n        </RangeText>\r\n        <StyledDoubleArrow />\r\n        <RangeText data-testid={`position-max-${priceUpper.toFixed(0)}`}>\r\n          <Trans>Max:</Trans>&nbsp;\r\n          {formatTickPrice({\r\n            price: priceUpper,\r\n            atLimit: ticksAtLimit,\r\n            direction: Bound.UPPER,\r\n          })}\r\n          &nbsp;\r\n          {positionInfo.pool.token0.symbol}&nbsp;\r\n          <Trans>per</Trans>&nbsp;\r\n          {positionInfo.pool.token1.symbol}\r\n        </RangeText>\r\n      </RangeWrapper>\r\n    </PositionWrapper>\r\n  )\r\n}\r\n\r\nexport function PoolDetailsPositionsTable({ positions }: { positions: PositionInfo[] }) {\r\n  return (\r\n    <PositionTableWrapper>\r\n      {positions.map((position, index) => (\r\n        <PositionRow positionInfo={position} key={`pool-position-${index}`} />\r\n      ))}\r\n    </PositionTableWrapper>\r\n  )\r\n}\r\n","import { ChainId } from '@uniswap/sdk-core'\r\nimport { SupportedInterfaceChainId, chainIdToBackendChain } from 'constants/chains'\r\nimport { useCallback, useMemo, useRef } from 'react'\r\nimport {\r\n  PoolTransactionType,\r\n  ProtocolVersion,\r\n  Token,\r\n  V2PairTransactionsQuery,\r\n  V3PoolTransactionsQuery,\r\n  useV2PairTransactionsQuery,\r\n  useV3PoolTransactionsQuery,\r\n} from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\nimport { FeatureFlags } from 'uniswap/src/features/gating/flags'\r\nimport { useFeatureFlag } from 'uniswap/src/features/gating/hooks'\r\n\r\nexport enum PoolTableTransactionType {\r\n  BUY = 'Buy',\r\n  SELL = 'Sell',\r\n  BURN = 'Burn',\r\n  MINT = 'Mint',\r\n}\r\n\r\nexport interface PoolTableTransaction {\r\n  timestamp: number\r\n  transaction: string\r\n  pool: {\r\n    token0: {\r\n      id: string\r\n      symbol: string\r\n    }\r\n    token1: {\r\n      id: string\r\n      symbol: string\r\n    }\r\n  }\r\n  maker: string\r\n  amount0: number\r\n  amount1: number\r\n  amountUSD: number\r\n  type: PoolTableTransactionType\r\n}\r\n\r\nconst PoolTransactionDefaultQuerySize = 25\r\n\r\nexport function usePoolTransactions(\r\n  address: string,\r\n  chainId?: SupportedInterfaceChainId,\r\n  // sortState: PoolTxTableSortState, TODO(WEB-3706): Implement sorting when BE supports\r\n  filter: PoolTableTransactionType[] = [\r\n    PoolTableTransactionType.BUY,\r\n    PoolTableTransactionType.SELL,\r\n    PoolTableTransactionType.BURN,\r\n    PoolTableTransactionType.MINT,\r\n  ],\r\n  token0?: Token,\r\n  protocolVersion: ProtocolVersion = ProtocolVersion.V3,\r\n  first = PoolTransactionDefaultQuerySize\r\n) {\r\n  const v2ExploreEnabled = useFeatureFlag(FeatureFlags.V2Explore)\r\n  const {\r\n    loading: loadingV3,\r\n    error: errorV3,\r\n    data: dataV3,\r\n    fetchMore: fetchMoreV3,\r\n  } = useV3PoolTransactionsQuery({\r\n    variables: { first, chain: chainIdToBackendChain({ chainId, withFallback: true }), address },\r\n    skip: protocolVersion !== ProtocolVersion.V3,\r\n  })\r\n  const {\r\n    loading: loadingV2,\r\n    error: errorV2,\r\n    data: dataV2,\r\n    fetchMore: fetchMoreV2,\r\n  } = useV2PairTransactionsQuery({\r\n    variables: { first, chain: chainIdToBackendChain({ chainId, withFallback: true }), address },\r\n    skip: !chainId || protocolVersion !== ProtocolVersion.V2 || (chainId !== ChainId.MAINNET && !v2ExploreEnabled),\r\n  })\r\n  const loadingMore = useRef(false)\r\n  const { transactions, loading, fetchMore, error } =\r\n    protocolVersion === ProtocolVersion.V3\r\n      ? { transactions: dataV3?.v3Pool?.transactions, loading: loadingV3, fetchMore: fetchMoreV3, error: errorV3 }\r\n      : { transactions: dataV2?.v2Pair?.transactions, loading: loadingV2, fetchMore: fetchMoreV2, error: errorV2 }\r\n\r\n  const loadMore = useCallback(\r\n    ({ onComplete }: { onComplete?: () => void }) => {\r\n      if (loadingMore.current) {\r\n        return\r\n      }\r\n      loadingMore.current = true\r\n      fetchMore({\r\n        variables: {\r\n          cursor: transactions?.[transactions.length - 1]?.timestamp,\r\n        },\r\n        updateQuery: (prev, { fetchMoreResult }: any) => {\r\n          if (!fetchMoreResult) return prev\r\n          onComplete?.()\r\n          const mergedData =\r\n            protocolVersion === ProtocolVersion.V3\r\n              ? {\r\n                  v3Pool: {\r\n                    ...fetchMoreResult.v3Pool,\r\n                    transactions: [\r\n                      ...((prev as V3PoolTransactionsQuery).v3Pool?.transactions ?? []),\r\n                      ...fetchMoreResult.v3Pool.transactions,\r\n                    ],\r\n                  },\r\n                }\r\n              : {\r\n                  v2Pair: {\r\n                    ...fetchMoreResult.v2Pair,\r\n                    transactions: [\r\n                      ...((prev as V2PairTransactionsQuery).v2Pair?.transactions ?? []),\r\n                      ...fetchMoreResult.v2Pair.transactions,\r\n                    ],\r\n                  },\r\n                }\r\n          loadingMore.current = false\r\n          return mergedData\r\n        },\r\n      })\r\n    },\r\n    [fetchMore, transactions, protocolVersion]\r\n  )\r\n\r\n  const filteredTransactions = useMemo(() => {\r\n    return (transactions ?? [])\r\n      ?.map((tx) => {\r\n        if (!tx) {\r\n          return undefined\r\n        }\r\n        const tokenIn = parseFloat(tx.token0Quantity) > 0 ? tx.token0 : tx.token1\r\n        const isSell = tokenIn?.address?.toLowerCase() === token0?.address?.toLowerCase()\r\n        const type =\r\n          tx.type === PoolTransactionType.Swap\r\n            ? isSell\r\n              ? PoolTableTransactionType.SELL\r\n              : PoolTableTransactionType.BUY\r\n            : tx.type === PoolTransactionType.Remove\r\n            ? PoolTableTransactionType.BURN\r\n            : PoolTableTransactionType.MINT\r\n        if (!filter.includes(type)) return undefined\r\n        return {\r\n          timestamp: tx.timestamp,\r\n          transaction: tx.hash,\r\n          pool: {\r\n            token0: {\r\n              id: tx.token0.address ?? '',\r\n              symbol: tx.token0.symbol ?? '',\r\n            },\r\n            token1: {\r\n              id: tx.token1.address ?? '',\r\n              symbol: tx.token1.symbol ?? '',\r\n            },\r\n          },\r\n          maker: tx.account,\r\n          amount0: parseFloat(tx.token0Quantity),\r\n          amount1: parseFloat(tx.token1Quantity),\r\n          amountUSD: tx.usdValue.value,\r\n          type,\r\n        }\r\n      })\r\n      .filter((value: PoolTableTransaction | undefined): value is PoolTableTransaction => value !== undefined)\r\n  }, [transactions, filter, token0?.address])\r\n\r\n  return useMemo(() => {\r\n    return {\r\n      transactions: filteredTransactions,\r\n      loading,\r\n      loadMore,\r\n      error,\r\n    }\r\n  }, [filteredTransactions, loading, loadMore, error])\r\n}\r\n","import { createColumnHelper } from '@tanstack/react-table'\r\nimport Row from 'components/Row'\r\nimport { Table } from 'components/Table'\r\nimport { Cell } from 'components/Table/Cell'\r\nimport { Filter } from 'components/Table/Filter'\r\nimport { FilterHeaderRow, HeaderArrow, HeaderSortText, TimestampCell } from 'components/Table/styled'\r\nimport { useChainFromUrlParam } from 'constants/chains'\r\nimport { NATIVE_CHAIN_ID, WRAPPED_NATIVE_CURRENCY } from 'constants/tokens'\r\nimport {\r\n  PoolTableTransaction,\r\n  PoolTableTransactionType,\r\n  usePoolTransactions,\r\n} from 'graphql/data/pools/usePoolTransactions'\r\nimport { getSupportedGraphQlChain, supportedChainIdFromGQLChain } from 'graphql/data/util'\r\nimport { OrderDirection, Transaction_OrderBy } from 'graphql/thegraph/__generated__/types-and-hooks'\r\nimport { useActiveLocalCurrency } from 'hooks/useActiveLocalCurrency'\r\nimport { Trans } from 'i18n'\r\nimport { useMemo, useReducer, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { ExternalLink, ThemedText } from 'theme/components'\r\nimport { ProtocolVersion, Token } from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\nimport { shortenAddress } from 'utilities/src/addresses'\r\nimport { NumberType, useFormatter } from 'utils/formatNumbers'\r\nimport { ExplorerDataType, getExplorerLink } from 'utils/getExplorerLink'\r\n\r\nconst StyledExternalLink = styled(ExternalLink)`\r\n  color: ${({ theme }) => theme.neutral2};\r\n  stroke: ${({ theme }) => theme.neutral2};\r\n`\r\n\r\nconst TableWrapper = styled.div`\r\n  min-height: 256px;\r\n`\r\n\r\ntype PoolTxTableSortState = {\r\n  sortBy: Transaction_OrderBy\r\n  sortDirection: OrderDirection\r\n}\r\n\r\nenum PoolTransactionColumn {\r\n  Timestamp,\r\n  Type,\r\n  MakerAddress,\r\n  FiatValue,\r\n  InputAmount,\r\n  OutputAmount,\r\n}\r\n\r\nconst PoolTransactionColumnWidth: { [key in PoolTransactionColumn]: number } = {\r\n  [PoolTransactionColumn.Timestamp]: 120,\r\n  [PoolTransactionColumn.Type]: 144,\r\n  [PoolTransactionColumn.MakerAddress]: 100,\r\n  [PoolTransactionColumn.FiatValue]: 125,\r\n  [PoolTransactionColumn.InputAmount]: 125,\r\n  [PoolTransactionColumn.OutputAmount]: 125,\r\n}\r\n\r\nfunction comparePoolTokens(tokenA: PoolTableTransaction['pool']['token0'], tokenB?: Token) {\r\n  if (tokenB?.address === NATIVE_CHAIN_ID) {\r\n    const chainId = supportedChainIdFromGQLChain(tokenB.chain)\r\n    return chainId && tokenA.id.toLowerCase() === WRAPPED_NATIVE_CURRENCY[chainId]?.address.toLowerCase()\r\n  }\r\n  return tokenA.id.toLowerCase() === tokenB?.address?.toLowerCase()\r\n}\r\n\r\nexport function PoolDetailsTransactionsTable({\r\n  poolAddress,\r\n  token0,\r\n  token1,\r\n  protocolVersion,\r\n}: {\r\n  poolAddress: string\r\n  token0?: Token\r\n  token1?: Token\r\n  protocolVersion?: ProtocolVersion\r\n}) {\r\n  const chain = getSupportedGraphQlChain(useChainFromUrlParam(), { fallbackToEthereum: true })\r\n  const activeLocalCurrency = useActiveLocalCurrency()\r\n  const { formatNumber, formatFiatPrice } = useFormatter()\r\n  const [filterModalIsOpen, toggleFilterModal] = useReducer((s) => !s, false)\r\n  const [filter, setFilters] = useState<PoolTableTransactionType[]>([\r\n    PoolTableTransactionType.BUY,\r\n    PoolTableTransactionType.SELL,\r\n    PoolTableTransactionType.BURN,\r\n    PoolTableTransactionType.MINT,\r\n  ])\r\n\r\n  const [sortState] = useState<PoolTxTableSortState>({\r\n    sortBy: Transaction_OrderBy.Timestamp,\r\n    sortDirection: OrderDirection.Desc,\r\n  })\r\n  const { transactions, loading, loadMore, error } = usePoolTransactions(\r\n    poolAddress,\r\n    chain.id,\r\n    filter,\r\n    token0,\r\n    protocolVersion\r\n  )\r\n\r\n  const showLoadingSkeleton = loading || !!error\r\n  const columns = useMemo(() => {\r\n    const columnHelper = createColumnHelper<PoolTableTransaction>()\r\n    return [\r\n      columnHelper.accessor((row) => row, {\r\n        id: 'timestamp',\r\n        header: () => (\r\n          <Cell minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.Timestamp]} justifyContent=\"flex-start\">\r\n            <Row gap=\"4px\">\r\n              {sortState.sortBy === Transaction_OrderBy.Timestamp && <HeaderArrow direction={OrderDirection.Desc} />}\r\n              <HeaderSortText $active={sortState.sortBy === Transaction_OrderBy.Timestamp}>\r\n                <Trans>Time</Trans>\r\n              </HeaderSortText>\r\n            </Row>\r\n          </Cell>\r\n        ),\r\n        cell: (row) => (\r\n          <Cell\r\n            loading={showLoadingSkeleton}\r\n            minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.Timestamp]}\r\n            justifyContent=\"flex-start\"\r\n          >\r\n            <TimestampCell\r\n              timestamp={Number(row.getValue?.().timestamp)}\r\n              link={getExplorerLink(chain.id, row.getValue?.().transaction, ExplorerDataType.TRANSACTION)}\r\n            />\r\n          </Cell>\r\n        ),\r\n      }),\r\n      columnHelper.accessor(\r\n        (row) => {\r\n          let color, text\r\n          if (row.type === PoolTableTransactionType.BUY) {\r\n            color = 'success'\r\n            text = (\r\n              <span>\r\n                <Trans>Buy</Trans>&nbsp;{token0?.symbol}\r\n              </span>\r\n            )\r\n          } else if (row.type === PoolTableTransactionType.SELL) {\r\n            color = 'critical'\r\n            text = (\r\n              <span>\r\n                <Trans>Sell</Trans>&nbsp;{token0?.symbol}\r\n              </span>\r\n            )\r\n          } else {\r\n            color = row.type === PoolTableTransactionType.MINT ? 'success' : 'critical'\r\n            text = row.type === PoolTableTransactionType.MINT ? <Trans>Add</Trans> : <Trans>Remove</Trans>\r\n          }\r\n          return <ThemedText.BodyPrimary color={color}>{text}</ThemedText.BodyPrimary>\r\n        },\r\n        {\r\n          id: 'swap-type',\r\n          header: () => (\r\n            <Cell minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.Type]} justifyContent=\"flex-start\">\r\n              <FilterHeaderRow modalOpen={filterModalIsOpen} onClick={() => toggleFilterModal()}>\r\n                <Filter\r\n                  allFilters={Object.values(PoolTableTransactionType)}\r\n                  activeFilter={filter}\r\n                  setFilters={setFilters}\r\n                  isOpen={filterModalIsOpen}\r\n                  toggleFilterModal={toggleFilterModal}\r\n                />\r\n                <ThemedText.BodySecondary>\r\n                  <Trans>Type</Trans>\r\n                </ThemedText.BodySecondary>\r\n              </FilterHeaderRow>\r\n            </Cell>\r\n          ),\r\n          cell: (PoolTransactionTableType) => (\r\n            <Cell\r\n              loading={showLoadingSkeleton}\r\n              minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.Type]}\r\n              justifyContent=\"flex-start\"\r\n            >\r\n              {PoolTransactionTableType.getValue?.()}\r\n            </Cell>\r\n          ),\r\n        }\r\n      ),\r\n      columnHelper.accessor((row) => row.amountUSD, {\r\n        id: 'fiat-value',\r\n        header: () => (\r\n          <Cell minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.FiatValue]} justifyContent=\"flex-end\" grow>\r\n            <ThemedText.BodySecondary>{activeLocalCurrency}</ThemedText.BodySecondary>\r\n          </Cell>\r\n        ),\r\n        cell: (fiat) => (\r\n          <Cell\r\n            loading={showLoadingSkeleton}\r\n            minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.FiatValue]}\r\n            justifyContent=\"flex-end\"\r\n            grow\r\n          >\r\n            <ThemedText.BodyPrimary>{formatFiatPrice({ price: fiat.getValue?.() })}</ThemedText.BodyPrimary>\r\n          </Cell>\r\n        ),\r\n      }),\r\n      columnHelper.accessor((row) => (comparePoolTokens(row.pool.token0, token0) ? row.amount0 : row.amount1), {\r\n        id: 'input-amount',\r\n        header: () => (\r\n          <Cell\r\n            loading={showLoadingSkeleton}\r\n            minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.InputAmount]}\r\n            justifyContent=\"flex-end\"\r\n            grow\r\n          >\r\n            <ThemedText.BodySecondary>{token0?.symbol}</ThemedText.BodySecondary>\r\n          </Cell>\r\n        ),\r\n        cell: (inputTokenAmount) => (\r\n          <Cell\r\n            loading={showLoadingSkeleton}\r\n            minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.InputAmount]}\r\n            justifyContent=\"flex-end\"\r\n            grow\r\n          >\r\n            <ThemedText.BodyPrimary>\r\n              {formatNumber({ input: Math.abs(inputTokenAmount.getValue?.() ?? 0), type: NumberType.TokenTx })}\r\n            </ThemedText.BodyPrimary>\r\n          </Cell>\r\n        ),\r\n      }),\r\n      columnHelper.accessor((row) => (comparePoolTokens(row.pool.token0, token0) ? row.amount1 : row.amount0), {\r\n        id: 'output-amount',\r\n        header: () => (\r\n          <Cell\r\n            loading={showLoadingSkeleton}\r\n            minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.OutputAmount]}\r\n            justifyContent=\"flex-end\"\r\n            grow\r\n          >\r\n            <ThemedText.BodySecondary>{token1?.symbol}</ThemedText.BodySecondary>\r\n          </Cell>\r\n        ),\r\n        cell: (outputTokenAmount) => (\r\n          <Cell\r\n            loading={showLoadingSkeleton}\r\n            minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.OutputAmount]}\r\n            justifyContent=\"flex-end\"\r\n            grow\r\n          >\r\n            <ThemedText.BodyPrimary>\r\n              {formatNumber({ input: Math.abs(outputTokenAmount.getValue?.() ?? 0), type: NumberType.TokenTx })}\r\n            </ThemedText.BodyPrimary>\r\n          </Cell>\r\n        ),\r\n      }),\r\n      columnHelper.accessor((row) => row.maker, {\r\n        id: 'maker-address',\r\n        header: () => (\r\n          <Cell\r\n            minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.MakerAddress]}\r\n            justifyContent=\"flex-end\"\r\n            grow\r\n          >\r\n            <ThemedText.BodySecondary>\r\n              <Trans>Wallet</Trans>\r\n            </ThemedText.BodySecondary>\r\n          </Cell>\r\n        ),\r\n        cell: (makerAddress) => (\r\n          <Cell\r\n            loading={showLoadingSkeleton}\r\n            minWidth={PoolTransactionColumnWidth[PoolTransactionColumn.MakerAddress]}\r\n            justifyContent=\"flex-end\"\r\n            grow\r\n          >\r\n            <StyledExternalLink href={getExplorerLink(chain.id, makerAddress.getValue?.(), ExplorerDataType.ADDRESS)}>\r\n              <ThemedText.BodyPrimary>{shortenAddress(makerAddress.getValue?.(), 0)}</ThemedText.BodyPrimary>\r\n            </StyledExternalLink>\r\n          </Cell>\r\n        ),\r\n      }),\r\n    ]\r\n  }, [\r\n    activeLocalCurrency,\r\n    chain.id,\r\n    filter,\r\n    filterModalIsOpen,\r\n    formatFiatPrice,\r\n    formatNumber,\r\n    showLoadingSkeleton,\r\n    sortState.sortBy,\r\n    token0,\r\n    token1?.symbol,\r\n  ])\r\n\r\n  return (\r\n    <TableWrapper data-testid=\"pool-details-transactions-table\">\r\n      <Table\r\n        columns={columns}\r\n        data={transactions}\r\n        loading={loading}\r\n        error={error}\r\n        loadMore={loadMore}\r\n        maxHeight={600}\r\n      />\r\n    </TableWrapper>\r\n  )\r\n}\r\n","import { Pool } from '@uniswap/v3-sdk'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport useMultiChainPositions from 'components/AccountDrawer/MiniPortfolio/Pools/useMultiChainPositions'\r\nimport Column from 'components/Column'\r\nimport { PoolDetailsPositionsTable } from 'components/Pools/PoolDetails/PoolDetailsPositionsTable'\r\nimport Row from 'components/Row'\r\nimport { getSupportedGraphQlChain } from 'graphql/data/util'\r\nimport { Trans } from 'i18n'\r\nimport { useMemo, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { ClickableStyle, ThemedText } from 'theme/components'\r\nimport { ProtocolVersion, Token } from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\n\r\nimport { useChainFromUrlParam } from 'constants/chains'\r\nimport { PoolDetailsTransactionsTable } from './PoolDetailsTransactionsTable'\r\n\r\nenum PoolDetailsTableTabs {\r\n  TRANSACTIONS = 'transactions',\r\n  POSITIONS = 'positions',\r\n}\r\n\r\nconst TableHeader = styled(ThemedText.HeadlineMedium)<{ active: boolean }>`\r\n  color: ${({ theme, active }) => !active && theme.neutral2};\r\n  ${({ disabled }) => !disabled && ClickableStyle}\r\n  user-select: none;\r\n`\r\n\r\nexport function PoolDetailsTableTab({\r\n  poolAddress,\r\n  token0,\r\n  token1,\r\n  protocolVersion,\r\n}: {\r\n  poolAddress: string\r\n  token0?: Token\r\n  token1?: Token\r\n  protocolVersion?: ProtocolVersion\r\n}) {\r\n  const [activeTable, setActiveTable] = useState<PoolDetailsTableTabs>(PoolDetailsTableTabs.TRANSACTIONS)\r\n  const chain = getSupportedGraphQlChain(useChainFromUrlParam(), { fallbackToEthereum: true })\r\n  const { account } = useWeb3React()\r\n  const { positions } = useMultiChainPositions(account ?? '', [chain.id])\r\n  const positionsInThisPool = useMemo(\r\n    () =>\r\n      positions?.filter(\r\n        (position) =>\r\n          Pool.getAddress(position.pool.token0, position.pool.token1, position.pool.fee).toLowerCase() ===\r\n          poolAddress.toLowerCase()\r\n      ) ?? [],\r\n    [poolAddress, positions]\r\n  )\r\n  return (\r\n    <Column gap=\"lg\">\r\n      <Row gap=\"16px\">\r\n        <TableHeader\r\n          active={activeTable === PoolDetailsTableTabs.TRANSACTIONS}\r\n          onClick={() => setActiveTable(PoolDetailsTableTabs.TRANSACTIONS)}\r\n          disabled={!positionsInThisPool.length}\r\n        >\r\n          <Trans>Transactions</Trans>\r\n        </TableHeader>\r\n        {Boolean(positionsInThisPool.length) && (\r\n          <TableHeader\r\n            active={activeTable === PoolDetailsTableTabs.POSITIONS}\r\n            onClick={() => setActiveTable(PoolDetailsTableTabs.POSITIONS)}\r\n          >\r\n            <Trans>Positions</Trans>\r\n            {` (${positionsInThisPool?.length})`}\r\n          </TableHeader>\r\n        )}\r\n      </Row>\r\n      {activeTable === PoolDetailsTableTabs.TRANSACTIONS ? (\r\n        <PoolDetailsTransactionsTable\r\n          poolAddress={poolAddress}\r\n          token0={token0}\r\n          token1={token1}\r\n          protocolVersion={protocolVersion}\r\n        />\r\n      ) : (\r\n        <PoolDetailsPositionsTable positions={positionsInThisPool} />\r\n      )}\r\n    </Column>\r\n  )\r\n}\r\n","import { ChainId } from '@uniswap/sdk-core'\r\nimport { SupportedInterfaceChainId, chainIdToBackendChain } from 'constants/chains'\r\nimport { V2_BIPS } from 'graphql/data/pools/useTopPools'\r\nimport ms from 'ms'\r\nimport { useMemo } from 'react'\r\nimport {\r\n  ProtocolVersion,\r\n  Token,\r\n  useV2PairQuery,\r\n  useV3PoolQuery,\r\n} from 'uniswap/src/data/graphql/uniswap-data-api/__generated__/types-and-hooks'\r\nimport { FeatureFlags } from 'uniswap/src/features/gating/flags'\r\nimport { useFeatureFlag } from 'uniswap/src/features/gating/hooks'\r\n\r\nexport interface PoolData {\r\n  // basic pool info\r\n  address: string\r\n  feeTier?: number\r\n  txCount?: number\r\n  protocolVersion?: ProtocolVersion\r\n\r\n  // token info\r\n  token0: Token\r\n  tvlToken0?: number\r\n  token0Price?: number\r\n\r\n  token1: Token\r\n  tvlToken1?: number\r\n  token1Price?: number\r\n\r\n  // volume\r\n  volumeUSD24H?: number\r\n  volumeUSD24HChange?: number\r\n\r\n  // liquidity\r\n  tvlUSD?: number\r\n  tvlUSDChange?: number\r\n}\r\n\r\ntype VolumeChange = { value: number; timestamp: number }\r\n\r\n/**\r\n * Given an array of historical volume, calculate the 24h % change in volume\r\n */\r\nfunction calc24HVolChange(historicalVolume?: (VolumeChange | undefined)[]) {\r\n  if (!historicalVolume) {\r\n    return undefined\r\n  }\r\n  const currentTime = new Date().getTime()\r\n  const dayAgo = (currentTime - ms('1d')) / 1000\r\n  const twoDaysAgo = (currentTime - ms('2d')) / 1000\r\n\r\n  const volume24h = historicalVolume\r\n    .filter((entry): entry is VolumeChange => entry?.timestamp !== undefined && entry.timestamp >= dayAgo)\r\n    .reduce((acc, cur) => acc + cur.value, 0)\r\n  const volume48h = historicalVolume\r\n    .filter(\r\n      (entry): entry is VolumeChange =>\r\n        entry?.timestamp !== undefined && entry.timestamp >= twoDaysAgo && entry.timestamp < dayAgo\r\n    )\r\n    .reduce((acc, cur) => acc + cur.value, 0)\r\n  return ((volume24h - volume48h) / volume48h) * 100\r\n}\r\n\r\n/**\r\n * Queries both v3 and v2 for pool data\r\n * @param poolAddress\r\n * @param chainId\r\n * @returns\r\n */\r\nexport function usePoolData(\r\n  poolAddress: string,\r\n  chainId?: SupportedInterfaceChainId\r\n): {\r\n  loading: boolean\r\n  error: boolean\r\n  data?: PoolData\r\n} {\r\n  const v2ExploreEnabled = useFeatureFlag(FeatureFlags.V2Explore)\r\n  const {\r\n    loading: loadingV3,\r\n    error: errorV3,\r\n    data: dataV3,\r\n  } = useV3PoolQuery({\r\n    variables: { chain: chainIdToBackendChain({ chainId, withFallback: true }), address: poolAddress },\r\n    errorPolicy: 'all',\r\n  })\r\n  const {\r\n    loading: loadingV2,\r\n    error: errorV2,\r\n    data: dataV2,\r\n  } = useV2PairQuery({\r\n    variables: { chain: chainIdToBackendChain({ chainId, withFallback: true }), address: poolAddress },\r\n    skip: !chainId || (chainId !== ChainId.MAINNET && !v2ExploreEnabled),\r\n    errorPolicy: 'all',\r\n  })\r\n\r\n  return useMemo(() => {\r\n    const anyError = Boolean(errorV3 || (errorV2 && (chainId === ChainId.MAINNET || v2ExploreEnabled)))\r\n    const anyLoading = Boolean(loadingV3 || (loadingV2 && (chainId === ChainId.MAINNET || v2ExploreEnabled)))\r\n\r\n    const pool = dataV3?.v3Pool ?? dataV2?.v2Pair ?? undefined\r\n    const feeTier = dataV3?.v3Pool?.feeTier ?? V2_BIPS\r\n\r\n    return {\r\n      data: pool\r\n        ? {\r\n            address: pool.address,\r\n            txCount: pool.txCount,\r\n            protocolVersion: pool.protocolVersion,\r\n            token0: pool.token0 as Token,\r\n            tvlToken0: pool.token0Supply,\r\n            token0Price: pool.token0?.project?.markets?.[0]?.price?.value,\r\n            token1: pool.token1 as Token,\r\n            tvlToken1: pool.token1Supply,\r\n            token1Price: pool.token1?.project?.markets?.[0]?.price?.value,\r\n            feeTier,\r\n            volumeUSD24H: pool.volume24h?.value,\r\n            volumeUSD24HChange: calc24HVolChange(pool.historicalVolume?.concat()),\r\n            tvlUSD: pool.totalLiquidity?.value,\r\n            tvlUSDChange: pool.totalLiquidityPercentChange24h?.value,\r\n          }\r\n        : undefined,\r\n      error: anyError,\r\n      loading: anyLoading,\r\n    }\r\n  }, [chainId, dataV2?.v2Pair, dataV3?.v3Pool, errorV2, errorV3, loadingV2, loadingV3, v2ExploreEnabled])\r\n}\r\n","import { PoolData } from 'graphql/data/pools/usePoolData'\r\nimport { t } from 'i18n'\r\n\r\nexport const getPoolDetailPageTitle = (poolData?: PoolData) => {\r\n  const token0Symbol = poolData?.token0.symbol\r\n  const token1Symbol = poolData?.token1.symbol\r\n  const baseTitle = t`Buy and sell on Uniswap`\r\n  if (!token0Symbol || !token1Symbol) {\r\n    return baseTitle\r\n  }\r\n\r\n  return `${token0Symbol}/${token1Symbol}: ${baseTitle}`\r\n}\r\n","import { InterfacePageName } from '@uniswap/analytics-events'\r\nimport { Trace } from 'analytics'\r\nimport Column from 'components/Column'\r\nimport ChartSection from 'components/Pools/PoolDetails/ChartSection'\r\nimport { PoolDetailsBreadcrumb, PoolDetailsHeader } from 'components/Pools/PoolDetails/PoolDetailsHeader'\r\nimport { PoolDetailsLink } from 'components/Pools/PoolDetails/PoolDetailsLink'\r\nimport { PoolDetailsStats } from 'components/Pools/PoolDetails/PoolDetailsStats'\r\nimport { PoolDetailsStatsButtons } from 'components/Pools/PoolDetails/PoolDetailsStatsButtons'\r\nimport { PoolDetailsTableTab } from 'components/Pools/PoolDetails/PoolDetailsTable'\r\nimport Row from 'components/Row'\r\nimport { useChainFromUrlParam } from 'constants/chains'\r\nimport { PoolData, usePoolData } from 'graphql/data/pools/usePoolData'\r\nimport { getSupportedGraphQlChain, gqlToCurrency, unwrapToken } from 'graphql/data/util'\r\nimport { useColor } from 'hooks/useColor'\r\nimport { Trans } from 'i18n'\r\nimport NotFound from 'pages/NotFound'\r\nimport { getPoolDetailPageTitle } from 'pages/PoolDetails/utils'\r\nimport { useDynamicMetatags } from 'pages/metatags'\r\nimport { useMemo, useReducer } from 'react'\r\nimport { Helmet } from 'react-helmet-async/lib/index'\r\nimport { useParams } from 'react-router-dom'\r\nimport { Text } from 'rebass'\r\nimport styled, { useTheme } from 'styled-components'\r\nimport { BREAKPOINTS, ThemeProvider } from 'theme'\r\nimport { isAddress } from 'utilities/src/addresses'\r\n\r\nconst PageWrapper = styled(Row)`\r\n  padding: 0 16px 52px;\r\n  justify-content: center;\r\n  width: 100%;\r\n  gap: 40px;\r\n  align-items: flex-start;\r\n\r\n  @media screen and (min-width: ${({ theme }) => theme.breakpoint.md}px) {\r\n    padding: 48px 20px;\r\n  }\r\n  @media screen and (max-width: ${({ theme }) => theme.breakpoint.lg}px) {\r\n    flex-direction: column;\r\n    align-items: center;\r\n    gap: 0px;\r\n  }\r\n  @media screen and (min-width: ${({ theme }) => theme.breakpoint.xl}px) {\r\n    gap: 60px;\r\n  }\r\n`\r\n\r\nconst LeftColumn = styled(Column)`\r\n  gap: 40px;\r\n  max-width: 780px;\r\n  overflow: hidden;\r\n  justify-content: flex-start;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    width: 100%;\r\n    max-width: unset;\r\n  }\r\n`\r\n\r\nconst HR = styled.hr`\r\n  border: 0.5px solid ${({ theme }) => theme.surface3};\r\n  width: 100%;\r\n`\r\n\r\nconst RightColumn = styled(Column)`\r\n  gap: 24px;\r\n  width: 360px;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) {\r\n    margin: 44px 0px;\r\n    width: 100%;\r\n    min-width: unset;\r\n    & > *:first-child {\r\n      margin-top: -24px;\r\n    }\r\n  }\r\n`\r\n\r\nconst TokenDetailsWrapper = styled(Column)`\r\n  gap: 24px;\r\n  padding: 20px;\r\n\r\n  @media (max-width: ${BREAKPOINTS.lg}px) and (min-width: ${BREAKPOINTS.sm}px) {\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    padding: unset;\r\n  }\r\n\r\n  @media (max-width: ${BREAKPOINTS.sm}px) {\r\n    padding: unset;\r\n  }\r\n`\r\n\r\nconst TokenDetailsHeader = styled(Text)`\r\n  width: 100%;\r\n  font-size: 24px;\r\n  font-weight: 485;\r\n  line-height: 32px;\r\n`\r\n\r\nconst LinksContainer = styled(Column)`\r\n  gap: 16px;\r\n  width: 100%;\r\n`\r\n\r\nfunction getUnwrappedPoolToken(poolData?: PoolData, chainId?: number) {\r\n  return poolData?.token0 && poolData?.token1 && chainId\r\n    ? [unwrapToken(chainId, poolData?.token0), unwrapToken(chainId, poolData?.token1)]\r\n    : [undefined, undefined]\r\n}\r\n\r\nexport default function PoolDetailsPage() {\r\n  const { poolAddress } = useParams<{ poolAddress: string }>()\r\n  const chainInfo = getSupportedGraphQlChain(useChainFromUrlParam())\r\n  const { data: poolData, loading } = usePoolData(poolAddress?.toLowerCase() ?? '', chainInfo?.id)\r\n  const [isReversed, toggleReversed] = useReducer((x) => !x, false)\r\n  const unwrappedTokens = getUnwrappedPoolToken(poolData, chainInfo?.id)\r\n  const [token0, token1] = isReversed ? [unwrappedTokens?.[1], unwrappedTokens?.[0]] : unwrappedTokens\r\n\r\n  const { darkMode, surface2, accent1 } = useTheme()\r\n  const color0 = useColor(token0 && gqlToCurrency(token0), {\r\n    backgroundColor: surface2,\r\n    darkMode,\r\n  })\r\n  const color1 = useColor(token1 && gqlToCurrency(token1), {\r\n    backgroundColor: surface2,\r\n    darkMode,\r\n  })\r\n\r\n  const isInvalidPool = !poolAddress || !chainInfo || !isAddress(poolAddress)\r\n  const poolNotFound = (!loading && !poolData) || isInvalidPool\r\n\r\n  const metatagProperties = useMemo(() => {\r\n    const token0Symbol = poolData?.token0.symbol\r\n    const token1Symbol = poolData?.token1.symbol\r\n    const poolName = `${token0Symbol}/${token1Symbol}`\r\n    const chainName = chainInfo?.label ?? 'Ethereum'\r\n    return {\r\n      title: poolName,\r\n      url: window.location.href,\r\n      description: `Swap ${poolName} on ${chainName}. Trade tokens and provide liquidity. Real-time prices, charts, transaction data, and more.`,\r\n    }\r\n  }, [chainInfo?.label, poolData?.token0.symbol, poolData?.token1.symbol])\r\n  const metatags = useDynamicMetatags(metatagProperties)\r\n\r\n  if (poolNotFound) return <NotFound />\r\n  return (\r\n    <ThemeProvider token0={color0 !== accent1 ? color0 : undefined} token1={color1 !== accent1 ? color1 : undefined}>\r\n      <Helmet>\r\n        <title>{getPoolDetailPageTitle(poolData)}</title>\r\n        {metatags.map((tag, index) => (\r\n          <meta key={index} {...tag} />\r\n        ))}\r\n      </Helmet>\r\n      <Trace\r\n        page={InterfacePageName.POOL_DETAILS_PAGE}\r\n        properties={{\r\n          poolAddress,\r\n          chainId: chainInfo?.id,\r\n          feeTier: poolData?.feeTier,\r\n          token0Address: poolData?.token0.address,\r\n          token1Address: poolData?.token1.address,\r\n          token0Symbol: poolData?.token0.symbol,\r\n          token1Symbol: poolData?.token1.symbol,\r\n          token0Name: poolData?.token0.name,\r\n          token1Name: poolData?.token1.name,\r\n        }}\r\n        shouldLogImpression={!loading}\r\n      >\r\n        <PageWrapper>\r\n          <LeftColumn>\r\n            <Column gap=\"20px\">\r\n              <Column>\r\n                <PoolDetailsBreadcrumb\r\n                  chainId={chainInfo?.id}\r\n                  poolAddress={poolAddress}\r\n                  token0={token0}\r\n                  token1={token1}\r\n                  loading={loading}\r\n                />\r\n                <PoolDetailsHeader\r\n                  chainId={chainInfo?.id}\r\n                  poolAddress={poolAddress}\r\n                  token0={token0}\r\n                  token1={token1}\r\n                  feeTier={poolData?.feeTier}\r\n                  protocolVersion={poolData?.protocolVersion}\r\n                  toggleReversed={toggleReversed}\r\n                  loading={loading}\r\n                />\r\n              </Column>\r\n              <ChartSection\r\n                poolData={poolData}\r\n                loading={loading}\r\n                isReversed={isReversed}\r\n                chain={chainInfo?.backendChain.chain}\r\n              />\r\n            </Column>\r\n            <HR />\r\n            <PoolDetailsTableTab\r\n              poolAddress={poolAddress}\r\n              token0={token0}\r\n              token1={token1}\r\n              protocolVersion={poolData?.protocolVersion}\r\n            />\r\n          </LeftColumn>\r\n          <RightColumn>\r\n            <PoolDetailsStatsButtons\r\n              chainId={chainInfo?.id}\r\n              token0={token0}\r\n              token1={token1}\r\n              feeTier={poolData?.feeTier}\r\n              loading={loading}\r\n            />\r\n            <PoolDetailsStats poolData={poolData} isReversed={isReversed} chainId={chainInfo?.id} loading={loading} />\r\n            <TokenDetailsWrapper>\r\n              <TokenDetailsHeader>\r\n                <Trans>Links</Trans>\r\n              </TokenDetailsHeader>\r\n              <LinksContainer>\r\n                <PoolDetailsLink\r\n                  address={poolAddress}\r\n                  chainId={chainInfo?.id}\r\n                  tokens={[token0, token1]}\r\n                  loading={loading}\r\n                />\r\n                <PoolDetailsLink\r\n                  address={token0?.address}\r\n                  chainId={chainInfo?.id}\r\n                  tokens={[token0]}\r\n                  loading={loading}\r\n                />\r\n                <PoolDetailsLink\r\n                  address={token1?.address}\r\n                  chainId={chainInfo?.id}\r\n                  tokens={[token1]}\r\n                  loading={loading}\r\n                />\r\n              </LinksContainer>\r\n            </TokenDetailsWrapper>\r\n          </RightColumn>\r\n        </PageWrapper>\r\n      </Trace>\r\n    </ThemeProvider>\r\n  )\r\n}\r\n"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","Plus","forwardRef","_ref","ref","_ref$color","color","_ref$size","size","rest","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","propTypes","displayName","httpLink","HttpLink","uri","CHAIN_SUBGRAPH_URL","ChainId","MAINNET","authMiddleware","ApolloLink","operation","forward","chainId","store","getState","application","setContext","isSupportedChainId","apolloClient","ApolloClient","cache","InMemoryCache","link","concat","chainToApolloClient","fromEntries","entries","map","url","PRICE_FIXED_DIGITS","computeSurroundingTicks","token0","token1","activeTickProcessed","sortedTickData","pivot","ascending","previousTickProcessed","processedTicks","tick","Number","sdkPrice","tickToPrice","currentTickProcessed","liquidityActive","liquidityNet","JSBI","price0","toFixed","push","reverse","getActiveTick","tickCurrent","feeAmount","Math","floor","TICK_SPACINGS","undefined","MAX_THE_GRAPH_TICK_FETCH_VALUE","useAllV3Ticks","currencyA","currencyB","data","skipNumber","setSkipNumber","useState","subgraphTickData","setSubgraphTickData","error","loading","isLoading","skip","poolAddress","Pool","getAddress","wrapped","V3_CORE_FACTORY_ADDRESSES","useAllV3TicksQuery","variables","toLowerCase","pollInterval","ms","client","useTicksFromSubgraph","useEffect","ticks","tickData","usePoolActiveLiquidity","pool","defaultChainId","useWeb3React","usePoolMultichain","liquidity","sqrtPriceX96","sqrtRatioX96","currentTick","activeTick","useMemo","PoolState","EXISTS","LOADING","findIndex","console","subsequentTicks","ticksProcessed","POOL_STATE_INTERFACE","Interface","IUniswapV3PoolStateJSON","getPoolAddress","factoryAddress","tokenA","tokenB","fee","addresses","MAX_ENTRIES","slice","address","addressA","addressB","toString","found","find","computePoolAddress","unshift","getPool","pools","usePools","poolKeys","useChainId","poolTokens","equals","sortsBefore","Array","poolAddresses","v3CoreFactoryAddress","value","PoolCache","slot0s","useMultipleContractSingleData","liquidities","_key","index","tokens","INVALID","result","slot0","slot0Loading","valid","slot0Valid","liquidityLoading","liquidityValid","NOT_EXISTS","eq","usePool","poolData","useRef","contractMap","contract","useContractMultichain","current","e","Image","styled","img","Container","div","Header","PageWrapper","theme","breakpoint","md","NotFound","isDarkMode","useIsDarkMode","isMobile","useIsMobile","Title","ThemedText","LargeHeader","Hero","Paragraph","HeadlineMedium","HeadlineLarge","Trace","page","InterfacePageName","NOT_FOUND","shouldLogImpression","Trans","src","darkImage","lightImage","alt","SmallButtonPrimary","as","Link","to","LiquidityBarSeriesRenderer","_data","_options","constructor","props","hoveredTick","draw","priceConverter","useBitmapCoordinateSpace","scope","_drawImpl","update","options","renderingScope","priceToCoordinate","bars","visibleRange","ctx","context","bar","x","y","originalData","calculateColumnPositionsInPlace","barSpacing","horizontalPixelRatio","from","zeroY","fillStyle","tokenAColor","stack","column","isCurrentTick","isHoveredTick","min","max","right","left","margin","widthWithMargin","totalBox","positionsBox","verticalPixelRatio","highlightOffset","canvas","highlightLength","highlightColor","beginPath","roundRect","globalAlpha","tokenBColor","position","activeTickProgress","globalCompositeOperation","activeRangeAdjustedHeight","activeRangeAdjustedPosition","fillRect","LiquidityBarSeries","_renderer","_tokenAColor","_tokenBColor","_highlightColor","priceValueBuilder","plotRow","isWhitespace","renderer","defaultOptions","customSeriesDefaultOptions","LiquidityBarChartModel","ChartModel","series","chartDiv","params","super","api","addCustomSeries","setData","updateOptions","fitContent","localization","locale","rightPriceScale","visible","borderVisible","scaleMargins","top","bottom","autoScale","timeScale","fixLeftEdge","fixRightEdge","crosshair","horzLine","labelVisible","vertLine","grid","vertLines","horzLines","applyOptions","priceFormat","type","priceLineVisible","lastValueVisible","onSeriesHover","hoverData","updatedOptions","item","activeTickIndex","midPoint","setVisibleLogicalRange","MAX_UINT128","BigNumber","pow","sub","maxAmount","token","CurrencyAmount","fromRawAmount","calculateActiveRangeTokensLocked","feeTier","liqGross","mockTicks","liquidityGross","pool1","bottomOfRangePrice","TickMath","getSqrtRatioAtTick","token1Amount","getOutputAmount","amount0Locked","parseFloat","invert","quote","toExact","topOfRangePrice","token0Amount","amount1Locked","calculateTokensLocked","tickSpacing","nextSqrtX96","maxAmountToken0","useLiquidityBarData","isReversed","formatNumber","formatPrice","useFormatter","activePoolData","setTickData","formatData","barData","activeRangePercentage","activeRangeIndex","t","fakeTime","isActive","price1","price","NumberType","SwapDetailsAmount","time","entry","activeRangeData","activeTickTvl","filter","PDP_CHART_HEIGHT_PX","PDP_CHART_SELECTOR_OPTIONS","ChartType","VOLUME","PRICE","LIQUIDITY","TimePeriodSelectorContainer","sm","ChartTypeSelectorContainer","StyledChart","Chart","PDPChartTypeSelector","chartType","onChartTypeChange","ChartTypeDropdown","currentChartType","onSelectOption","usePDPChartState","chain","protocolVersion","timePeriod","setTimePeriod","TimePeriod","DAY","setChartType","isV3","ProtocolVersion","V3","duration","toHistoryDuration","priceQuery","usePoolPriceHistoryQuery","priceHistory","v2Pair","v3Pool","referenceToken","token0Price","token1Price","timestamp","open","high","low","close","dataQuality","DataQuality","VALID","usePDPPriceChartData","volumeQuery","usePoolVolumeHistoryQuery","historicalVolume","amt","withUTCTimestamp","checkDataQuality","usePDPVolumeChartData","activeQuery","ChartSection","gqlToCurrency","Chain","Ethereum","refitChartContent","useAtomValue","refitChartContentAtom","ChartBody","ChartSkeleton","selectedChartProps","supportedChainIdFromGQLChain","LiquidityChart","errorText","stale","STALE","PriceChart","VolumeChart","filteredTimeOptions","DEFAULT_PILL_TIME_SELECTOR_OPTIONS","option","TimePeriodDisplay","HOUR","data-testid","ChartActionsContainer","PillMultiToggle","currentSelected","DISPLAYS","getTimePeriodFromDisplay","PriceDisplayContainer","ChartPriceText","EllipsisStyle","formatCurrencyAmount","primaryToken","PriceChartType","LINE","stablecoinPrice","useStablecoinPrice","lastPrice","Model","PriceChartModel","crosshairData","displayValue","currencyBAmountRaw","decimals","priceDisplay","symbol","amount","ChartHeader","additionalFields","PriceChartDelta","startingPrice","endingPrice","valueFormatterType","FiatTokenPrice","FadeInHeading","H1Medium","textFadeIn","FadeInSubheader","SubHeader","LiquidityTooltipDisplay","tokenADescriptor","tokenBDescriptor","displayValue0","input","TokenQuantityStats","displayValue1","BodySmall","name","useTheme","surface3","LoadingChart","TooltipBody","FeeAmount","LOWEST","displayPoint","display","paddingTop","DetailBubble","LoadingBubble","$height","$width","SmallDetailBubble","HeaderContainer","transition","medium","Badge","LabelMicro","surface2","ToggleReverseArrows","ReverseArrow","ClickableStyle","neutral2","IconBubble","PoolDetailsBreadcrumb","chainName","chainIdToBackendChain","withFallback","exploreOrigin","poolsOrigin","BreadcrumbNavContainer","aria-label","BreadcrumbNavLink","ChevronRight","CurrentPageBreadcrumb","poolName","StyledPoolDetailsTitle","PoolName","PoolDetailsTitle","toggleReversed","formatPercent","feePercent","Percent","BIPS_BASE","StyledLink","getTokenDetailsURL","V2","onClick","ContractsDropdownRowContainer","Row","ContractsDropdownRow","currency","isPool","currencies","isNative","NATIVE_CHAIN_ID","explorerUrl","getExplorerLink","ExplorerDataType","NATIVE","ADDRESS","TOKEN","StyledExternalLink","href","gap","DoubleCurrencyAndChainLogo","CurrencyLogo","BodyPrimary","BodySecondary","shortenAddress","ExternalLinkIcon","ContractsModalContainer","css","ActionMenuFlyoutStyle","PoolDetailsHeaderActions","contractsModalIsOpen","toggleContractsModal","useReducer","s","contractsRef","useOnClickOutside","justify","style","DropdownSelector","isOpen","toggleOpen","menuLabel","EtherscanLogo","neutral1","ExplorerIcon","internalMenuItems","tooltipText","hideChevron","buttonCss","ActionButtonStyle","menuFlyoutCss","ShareButton","PoolDetailsHeader","shouldColumnBreak","useScreenSize","Column","TokenName","BREAKPOINTS","lg","xs","TokenTextWrapper","isClickable","SymbolText","CopyAddress","StyledCopyIcon","Copy","ExplorerWrapper","ButtonsRow","PoolDetailsLink","isCopied","setCopied","useCopyClipboard","copy","useCallback","checksummedAddress","isAddress","navigate","useNavigate","handleTokenTextClick","truncateAddress","setTruncateAddress","onTextRender","textRef","clientWidth","scrollWidth","prev","align","Tooltip","placement","TooltipSize","Max","show","text","ExternalLink","padding","HeaderText","Text","StatsWrapper","loaded","StatItemColumn","PoolBalanceSymbols","PoolBalanceTokenNamesContainer","leftBarChartStyles","rightBarChartStyles","BalanceChartSide","percent","$color","isLeft","StatSectionBubble","StatHeaderBubble","PoolBalanceTokenNames","unwrappedToken","screenIsNotLarge","unwrapToken","nativeOnChain","marginRight","tvl","marginLeft","PoolDetailsStats","currency0","useCurrency","currency1","tvlToken0","tvlToken1","fullWidth","token0FullData","token1FullData","tvlUSD","StatItem","title","delta","tvlUSDChange","volumeUSD24H","volumeUSD24HChange","_","StatsTextContainer","StatItemText","formatDelta","FiatTokenStats","DeltaArrow","PoolDetailsStatsButtonsRow","surface1","Z_INDEX","sticky","PoolButton","button","$open","accent1","opacify","timing","inOut","$fixedWidth","$hideOnMobile","SwapIcon","ButtonBubble","SwapModalWrapper","ease","SwapWrapperOuter","CurrencySelect","fixed","MobileBalance","PoolDetailsStatsButtons","balanceQuery","walletChainId","account","positions","userOwnedPositions","useMultiChainPositions","details","closed","findMatchingPosition","tokenId","switchChain","useSwitchChain","useTokenBalancesQuery","balance0","balance1","balance0Fiat","balance1Fiat","filteredBalances","tokenBalance0","tokenBalance1","portfolios","tokenBalances","tokenBalance","quantity","denominatedValue","formattedBalance0","TokenNonTx","formattedBalance1","totalFiatValue","formattedFiatValue","PortfolioBalance","handleAddLiquidity","currencyId","swapModalOpen","toggleSwapModalOpen","state","isScreenSize","screenSizeLargerThanTablet","token0Warning","useTokenWarning","token1Warning","priorityWarning","getPriorityWarning","SubHeaderSmall","HeadlineSmall","Boolean","Caption","X","fontWeight","Swap","syncTabToUrl","initialInputCurrency","initialOutputCurrency","compact","disableTokenInputs","TokenSafetyMessage","tokenAddress","warning","StrongWarning","plural","tokenSymbol","Scrim","$maxWidth","$zIndex","ClosedCircle","svg","g","clipPath","path","d","defs","id","rect","PositionTableWrapper","PositionWrapper","FeeTier","StatusWrapper","status","PositionStatus","IN_RANGE","success","OUT_OF_RANGE","deprecated_accentWarning","RangeWrapper","StyledDoubleArrow","DoubleArrow","RangeText","StyledDot","PositionRow","positionInfo","formatTickPrice","inRange","CLOSED","priceUpper","token0PriceLower","priceLower","token0PriceUpper","ticksAtLimit","LOWER","UPPER","MAX_SAFE_INTEGER","DoubleCurrencyLogo","AlertTriangle","atLimit","direction","Bound","PoolDetailsPositionsTable","PoolTableTransactionType","BUY","SELL","BURN","MINT","PoolTransactionDefaultQuerySize","TableWrapper","PoolTransactionColumn","Timestamp","Type","MakerAddress","FiatValue","InputAmount","OutputAmount","PoolTransactionColumnWidth","comparePoolTokens","WRAPPED_NATIVE_CURRENCY","PoolDetailsTransactionsTable","getSupportedGraphQlChain","useChainFromUrlParam","fallbackToEthereum","activeLocalCurrency","useActiveLocalCurrency","formatFiatPrice","filterModalIsOpen","toggleFilterModal","setFilters","sortState","sortBy","Transaction_OrderBy","sortDirection","OrderDirection","Desc","transactions","loadMore","first","dataV3","dataV2","v2ExploreEnabled","useFeatureFlag","FeatureFlags","V2Explore","loadingV3","errorV3","fetchMore","fetchMoreV3","useV3PoolTransactionsQuery","loadingV2","errorV2","fetchMoreV2","useV2PairTransactionsQuery","loadingMore","onComplete","cursor","updateQuery","fetchMoreResult","mergedData","filteredTransactions","tx","tokenIn","isSell","token0Quantity","PoolTransactionType","Remove","includes","transaction","hash","maker","amount0","amount1","token1Quantity","amountUSD","usdValue","usePoolTransactions","showLoadingSkeleton","columns","columnHelper","createColumnHelper","accessor","row","header","Cell","minWidth","justifyContent","HeaderArrow","HeaderSortText","$active","cell","TimestampCell","getValue","TRANSACTION","span","FilterHeaderRow","modalOpen","Filter","allFilters","values","activeFilter","PoolTransactionTableType","grow","fiat","inputTokenAmount","abs","TokenTx","outputTokenAmount","makerAddress","Table","maxHeight","PoolDetailsTableTabs","TRANSACTIONS","POSITIONS","TableHeader","active","disabled","PoolDetailsTableTab","positionsInThisPool","activeTable","setActiveTable","calc24HVolChange","currentTime","Date","getTime","dayAgo","twoDaysAgo","volume24h","reduce","acc","cur","volume48h","getPoolDetailPageTitle","token0Symbol","token1Symbol","baseTitle","xl","LeftColumn","HR","hr","RightColumn","TokenDetailsWrapper","TokenDetailsHeader","LinksContainer","PoolDetailsPage","chainInfo","unwrappedTokens","useParams","useV3PoolQuery","errorPolicy","useV2PairQuery","anyError","anyLoading","V2_BIPS","txCount","token0Supply","project","markets","token1Supply","totalLiquidity","totalLiquidityPercentChange24h","usePoolData","getUnwrappedPoolToken","darkMode","color0","useColor","backgroundColor","color1","isInvalidPool","poolNotFound","metatagProperties","label","window","location","description","metatags","useDynamicMetatags","ThemeProvider","Helmet","tag","meta","POOL_DETAILS_PAGE","properties","token0Address","token1Address","token0Name","token1Name","backendChain"],"sourceRoot":""}